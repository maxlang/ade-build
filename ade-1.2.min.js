function adeDateDummyCtrl(){}function adeTimeDummyCtrl(){}var DateJSLoadCultureInfo=function(e){Date.CultureInfo="en-us"==e.toLowerCase()||"en"==e.toLowerCase()?{name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"}}:{name:"en-GB",englishName:"English (United Kingdom)",nativeName:"English (United Kingdom)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"dd/MM/yyyy",longDate:"dd MMMM yyyy",shortTime:"HH:mm",longTime:"HH:mm:ss",fullDateTime:"dd MMMM yyyy HH:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"dd MMMM",yearMonth:"MMMM yyyy"}}};DateJSLoadCultureInfo(window.navigator.userLanguage||window.navigator.language),Date.CultureInfo&&(Date.CultureInfo.regexPatterns={jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,lastDayOf:/^(last day of)|(last of)/i,firstDayOf:/^(first day of)|(first of)|(1st( day)? of)|first|1st/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence|in)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(t(erday)?)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m((on)?th)?s?/i,day:/^d(ay)?s?/i,year:/^yr(s)?|(y(ear)?s?)/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},Date.CultureInfo.timezones=[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]),function(){var e=Date,t=e.prototype,i=(Date.CultureInfo,function(e,t){return t||(t=2),("000"+e).slice(-1*t)});t.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},t.setTimeToNow=function(){var e=new Date;return this.setHours(e.getHours()),this.setMinutes(e.getMinutes()),this.setSeconds(e.getSeconds()),this.setMilliseconds(e.getMilliseconds()),this},e.today=function(){return(new Date).clearTime()},e.compare=function(e,t){if(isNaN(e)||isNaN(t))throw Error(e+" - "+t);if(e instanceof Date&&t instanceof Date)return t>e?-1:e>t?1:0;throw new TypeError(e+" - "+t)},e.equals=function(e,t){return 0===e.compareTo(t)},e.getDayNumberFromName=function(e){for(var t=Date.CultureInfo.dayNames,i=Date.CultureInfo.abbreviatedDayNames,n=Date.CultureInfo.shortestDayNames,s=e.toLowerCase(),a=0;t.length>a;a++)if(t[a].toLowerCase()==s||i[a].toLowerCase()==s||n[a].toLowerCase()==s)return a;return-1},e.getMonthNumberFromName=function(e){for(var t=Date.CultureInfo.monthNames,i=Date.CultureInfo.abbreviatedMonthNames,n=e.toLowerCase(),s=0;t.length>s;s++)if(t[s].toLowerCase()==n||i[s].toLowerCase()==n)return s;return-1},e.isLeapYear=function(e){return 0===e%4&&0!==e%100||0===e%400},e.getDaysInMonth=function(t,i){return[31,e.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][i]},e.getTimezoneAbbreviation=function(e){for(var t=Date.CultureInfo.timezones,i=0;t.length>i;i++)if(t[i].offset===e)return t[i].name;return null},e.getTimezoneOffset=function(e){for(var t=Date.CultureInfo.timezones,i=0;t.length>i;i++)if(t[i].name===e.toUpperCase())return t[i].offset;return null},t.clone=function(){return new Date(this.getTime())},t.compareTo=function(e){return Date.compare(this,e)},t.equals=function(e){return Date.equals(this,e||new Date)},t.between=function(e,t){return this.getTime()>=e.getTime()&&this.getTime()<=t.getTime()},t.isAfter=function(e){return 1===this.compareTo(e||new Date)},t.isBefore=function(e){return-1===this.compareTo(e||new Date)},t.isToday=t.isSameDay=function(e){return this.clone().clearTime().equals((e||new Date).clone().clearTime())},t.addMilliseconds=function(e){return this.setMilliseconds(this.getMilliseconds()+1*e),this},t.addSeconds=function(e){return this.addMilliseconds(1e3*e)},t.addMinutes=function(e){return this.addMilliseconds(6e4*e)},t.addHours=function(e){return this.addMilliseconds(36e5*e)},t.addDays=function(e){return this.setDate(this.getDate()+1*e),this},t.addWeeks=function(e){return this.addDays(7*e)},t.addMonths=function(t){var i=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+1*t),this.setDate(Math.min(i,e.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},t.addYears=function(e){return this.addMonths(12*e)},t.add=function(e){if("number"==typeof e)return this._orient=e,this;var t=e;return t.milliseconds&&this.addMilliseconds(t.milliseconds),t.seconds&&this.addSeconds(t.seconds),t.minutes&&this.addMinutes(t.minutes),t.hours&&this.addHours(t.hours),t.weeks&&this.addWeeks(t.weeks),t.months&&this.addMonths(t.months),t.years&&this.addYears(t.years),t.days&&this.addDays(t.days),this};var n,s,a;t.getWeek=function(){var e,t,i,r,o,l,h,c,u,d;return n=n?n:this.getFullYear(),s=s?s:this.getMonth()+1,a=a?a:this.getDate(),2>=s?(e=n-1,t=(0|e/4)-(0|e/100)+(0|e/400),i=(0|(e-1)/4)-(0|(e-1)/100)+(0|(e-1)/400),u=t-i,o=0,l=a-1+31*(s-1)):(e=n,t=(0|e/4)-(0|e/100)+(0|e/400),i=(0|(e-1)/4)-(0|(e-1)/100)+(0|(e-1)/400),u=t-i,o=u+1,l=a+(153*(s-3)+2)/5+58+u),h=(e+t)%7,r=(l+h-o)%7,c=0|l+3-r,d=0>c?53-(0|(h-u)/5):c>364+u?1:(0|c/7)+1,n=s=a=null,d},t.getISOWeek=function(){return n=this.getUTCFullYear(),s=this.getUTCMonth()+1,a=this.getUTCDate(),i(this.getWeek())},t.setWeek=function(e){return this.moveToDayOfWeek(1).addWeeks(e-this.getWeek())};var r=function(e,t,i,n){if(e===void 0)return!1;if("number"!=typeof e)throw new TypeError(e+" is not a Number.");if(t>e||e>i)throw new RangeError(e+" is not a valid value for "+n+".");return!0};e.validateMillisecond=function(e){return r(e,0,999,"millisecond")},e.validateSecond=function(e){return r(e,0,59,"second")},e.validateMinute=function(e){return r(e,0,59,"minute")},e.validateHour=function(e){return r(e,0,23,"hour")},e.validateDay=function(t,i,n){return r(t,1,e.getDaysInMonth(i,n),"day")},e.validateMonth=function(e){return r(e,0,11,"month")},e.validateYear=function(e){return r(e,0,9999,"year")},t.set=function(t){return e.validateMillisecond(t.millisecond)&&this.addMilliseconds(t.millisecond-this.getMilliseconds()),e.validateSecond(t.second)&&this.addSeconds(t.second-this.getSeconds()),e.validateMinute(t.minute)&&this.addMinutes(t.minute-this.getMinutes()),e.validateHour(t.hour)&&this.addHours(t.hour-this.getHours()),e.validateMonth(t.month)&&this.addMonths(t.month-this.getMonth()),e.validateYear(t.year)&&this.addYears(t.year-this.getFullYear()),e.validateDay(t.day,this.getFullYear(),this.getMonth())&&this.addDays(t.day-this.getDate()),t.timezone&&this.setTimezone(t.timezone),t.timezoneOffset&&this.setTimezoneOffset(t.timezoneOffset),t.week&&r(t.week,0,53,"week")&&this.setWeek(t.week),cDate=new Date,void 0==t.year&&(t.month<cDate.getMonth()||t.month==cDate.getMonth()&&t.day<cDate.getDate())&&this.addYears(1),this},t.moveToFirstDayOfMonth=function(){return this.set({day:1})},t.moveToLastDayOfMonth=function(){return this.set({day:e.getDaysInMonth(this.getFullYear(),this.getMonth())})},t.moveToNthOccurrence=function(e,t){var i=0;if(t>0)i=t-1;else if(-1===t)return this.moveToLastDayOfMonth(),this.getDay()!==e&&this.moveToDayOfWeek(e,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(e,1).addWeeks(i)},t.moveToDayOfWeek=function(e,t){var i=(e-this.getDay()+7*(t||1))%7;return this.addDays(0===i?i+=7*(t||1):i)},t.moveToMonth=function(e,t){var i=(e-this.getMonth()+12*(t||1))%12;return this.addMonths(0===i?i+=12*(t||1):i)},t.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},t.getTimezone=function(){return e.getTimezoneAbbreviation(this.getUTCOffset())},t.setTimezoneOffset=function(e){var t=this.getTimezoneOffset(),i=-6*Number(e)/10;return this.addMinutes(i-t)},t.setTimezone=function(t){return this.setTimezoneOffset(e.getTimezoneOffset(t))},t.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},t.isDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!=this.getTimezoneOffset()},t.getUTCOffset=function(){var e,t=-10*this.getTimezoneOffset()/6;return 0>t?(e=""+(t-1e4),e.charAt(0)+e.substr(2)):(e=""+(t+1e4),"+"+e.substr(1))},t.toUnixTimestamp=function(){return Math.round(this.getTime()/1e3)},t.getMonthName=function(e){return Date.CultureInfo&&Date.CultureInfo.monthNames&&e>=0&&12>e?Date.CultureInfo.monthNames[e]:""},t.getElapsed=function(e){return(e||new Date)-this},t.toISOString||(t.toISOString=function(){function e(e){return 10>e?"0"+e:e}return'"'+this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+'Z"'}),t._toString=t.toString,t.toString=function(e){var t=this;if(e&&1==e.length){var n=Date.CultureInfo.formatPatterns;switch(t.t=t.toString,e){case"d":return t.t(n.shortDate);case"D":return t.t(n.longDate);case"F":return t.t(n.fullDateTime);case"m":return t.t(n.monthDay);case"r":return t.t(n.rfc1123);case"s":return t.t(n.sortableDateTime);case"t":return t.t(n.shortTime);case"T":return t.t(n.longTime);case"u":return t.t(n.universalSortableDateTime);case"y":return t.t(n.yearMonth)}}var s=function(e){switch(1*e){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return e?e.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(e){if("\\"===e.charAt(0))return e.replace("\\","");switch(t.h=t.getHours,e){case"hh":return i(13>t.h()?0===t.h()?12:t.h():t.h()-12);case"h":return 13>t.h()?0===t.h()?12:t.h():t.h()-12;case"HH":return i(t.h());case"H":return t.h();case"mm":return i(t.getMinutes());case"m":return t.getMinutes();case"ss":return i(t.getSeconds());case"s":return t.getSeconds();case"yyyy":return i(t.getFullYear(),4);case"yy":return i(t.getFullYear());case"dddd":return Date.CultureInfo.dayNames[t.getDay()];case"ddd":return Date.CultureInfo.abbreviatedDayNames[t.getDay()];case"dd":return i(t.getDate());case"d":return t.getDate();case"MMMM":return Date.CultureInfo.monthNames[t.getMonth()];case"MMM":return Date.CultureInfo.abbreviatedMonthNames[t.getMonth()];case"MM":return i(t.getMonth()+1);case"M":return t.getMonth()+1;case"t":return 12>t.h()?Date.CultureInfo.amDesignator.substring(0,1):Date.CultureInfo.pmDesignator.substring(0,1);case"tt":return 12>t.h()?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator;case"S":return s(t.getDate());default:return e}}):this._toString()}}(),function(){var e=Date,t=e.prototype,i=(e.CultureInfo,Number.prototype);t._orient=1,t._nth=null,t._is=!1,t._same=!1,t._isSecond=!1,i._dateElement="day",t.next=function(){return this._orient=1,this},e.next=function(){return e.today().next()},t.last=t.prev=t.previous=function(){return this._orient=-1,this},e.last=e.prev=e.previous=function(){return e.today().last()},t.is=function(){return this._is=!0,this},t.same=function(){return this._same=!0,this._isSecond=!1,this},t.today=function(){return this.same().day()},t.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1},t.at=function(t){return"string"==typeof t?e.parse(this.toString("d")+" "+t):this.set(t)},i.fromNow=i.after=function(e){var t={};return t[this._dateElement]=this,(e?e.clone():new Date).add(t)},i.ago=i.before=function(e){var t={};return t[this._dateElement]=-1*this,(e?e.clone():new Date).add(t)};var n,s="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),a="january february march april may june july august september october november december".split(/\s/),r="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),o="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),l="final first second third fourth fifth".split(/\s/);t.toObject=function(){for(var e={},t=0;r.length>t;t++)e[r[t].toLowerCase()]=this["get"+o[t]]();return e},e.fromObject=function(e){return e.week=null,Date.today().set(e)};for(var h=function(t){return function(){if(this._is)return this._is=!1,this.getDay()==t;if(null!==this._nth){this._isSecond&&this.addSeconds(-1*this._orient),this._isSecond=!1;var i=this._nth;this._nth=null;var n=this.clone().moveToLastDayOfMonth();if(this.moveToNthOccurrence(t,i),this>n)throw new RangeError(e.getDayName(t)+" does not occur "+i+" times in the month of "+e.getMonthName(n.getMonth())+" "+n.getFullYear()+".");return this}return this.moveToDayOfWeek(t,this._orient)}},c=function(t){return function(){var i=e.today(),n=t-i.getDay();return 0===t&&1===Date.CultureInfo.firstDayOfWeek&&0!==i.getDay()&&(n+=7),i.addDays(n)}},u=0;s.length>u;u++)e[s[u].toUpperCase()]=e[s[u].toUpperCase().substring(0,3)]=u,e[s[u]]=e[s[u].substring(0,3)]=c(u),t[s[u]]=t[s[u].substring(0,3)]=h(u);for(var d=function(e){return function(){return this._is?(this._is=!1,this.getMonth()===e):this.moveToMonth(e,this._orient)}},f=function(t){return function(){return e.today().set({month:t,day:1})}},p=0;a.length>p;p++)e[a[p].toUpperCase()]=e[a[p].toUpperCase().substring(0,3)]=p,e[a[p]]=e[a[p].substring(0,3)]=f(p),t[a[p]]=t[a[p].substring(0,3)]=d(p);for(var m=function(e){return function(){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;for(var t=this.toObject(),i=(arguments[0]||new Date).toObject(),n="",s=e.toLowerCase(),a=r.length-1;a>-1;a--){if(n=r[a].toLowerCase(),t[n]!=i[n])return!1;if(s==n)break}return!0}return"s"!=e.substring(e.length-1)&&(e+="s"),this["add"+e](this._orient)}},g=function(e){return function(){return this._dateElement=e,this}},v=0;r.length>v;v++)n=r[v].toLowerCase(),t[n]=t[n+"s"]=m(r[v]),i[n]=i[n+"s"]=g(n);t._ss=m("Second");for(var y=function(e){return function(t){return this._same?this._ss(arguments[0]):t||0===t?this.moveToNthOccurrence(t,e):(this._nth=e,2!==e||void 0!==t&&null!==t?this:(this._isSecond=!0,this.addSeconds(this._orient)))}},w=0;l.length>w;w++)t[l[w]]=0===w?y(-1):y(w)}(),function(){Date.Parsing={Exception:function(e){this.message="Parse error at '"+e.substring(0,10)+" ...'"}};for(var e=Date.Parsing,t=e.Operators={rtoken:function(t){return function(i){var n=i.match(t);if(n)return[n[0],i.substring(n[0].length)];throw new e.Exception(i)}},token:function(){return function(e){return t.rtoken(RegExp("^s*"+e+"s*"))(e)}},stoken:function(e){return t.rtoken(RegExp("^"+e))},until:function(e){return function(t){for(var i=[],n=null;t.length;){try{n=e.call(this,t)}catch(s){i.push(n[0]),t=n[1];continue}break}return[i,t]}},many:function(e){return function(t){for(var i=[],n=null;t.length;){try{n=e.call(this,t)}catch(s){return[i,t]}i.push(n[0]),t=n[1]}return[i,t]}},optional:function(e){return function(t){var i=null;try{i=e.call(this,t)}catch(n){return[null,t]}return[i[0],i[1]]}},not:function(t){return function(i){try{t.call(this,i)}catch(n){return[null,i]}throw new e.Exception(i)}},ignore:function(e){return e?function(t){var i=null;return i=e.call(this,t),[null,i[1]]}:null},product:function(){for(var e=arguments[0],i=Array.prototype.slice.call(arguments,1),n=[],s=0;e.length>s;s++)n.push(t.each(e[s],i));return n},cache:function(t){var i={},n=null;return function(s){try{n=i[s]=i[s]||t.call(this,s)}catch(a){n=i[s]=a}if(n instanceof e.Exception)throw n;return n}},any:function(){var t=arguments;return function(i){for(var n=null,s=0;t.length>s;s++)if(null!=t[s]){try{n=t[s].call(this,i)}catch(a){n=null}if(n)return n}throw new e.Exception(i)}},each:function(){var t=arguments;return function(i){for(var n=[],s=null,a=0;t.length>a;a++)if(null!=t[a]){try{s=t[a].call(this,i)}catch(r){throw new e.Exception(i)}n.push(s[0]),i=s[1]}return[n,i]}},all:function(){var e=arguments,t=t;return t.each(t.optional(e))},sequence:function(i,n,s){return n=n||t.rtoken(/^\s*/),s=s||null,1==i.length?i[0]:function(t){for(var a=null,r=null,o=[],l=0;i.length>l;l++){try{a=i[l].call(this,t)}catch(h){break}o.push(a[0]);try{r=n.call(this,a[1])}catch(c){r=null;break}t=r[1]}if(!a)throw new e.Exception(t);if(r)throw new e.Exception(r[1]);if(s)try{a=s.call(this,a[1])}catch(u){throw new e.Exception(a[1])}return[o,a?a[1]:t]}},between:function(e,i,n){n=n||e;var s=t.each(t.ignore(e),i,t.ignore(n));return function(e){var t=s.call(this,e);return[[t[0][0],r[0][2]],t[1]]}},list:function(e,i,n){return i=i||t.rtoken(/^\s*/),n=n||null,e instanceof Array?t.each(t.product(e.slice(0,-1),t.ignore(i)),e.slice(-1),t.ignore(n)):t.each(t.many(t.each(e,t.ignore(i))),px,t.ignore(n))},set:function(i,n,s){return n=n||t.rtoken(/^\s*/),s=s||null,function(a){for(var r=null,o=null,l=null,h=null,c=[[],a],u=!1,d=0;i.length>d;d++){l=null,o=null,r=null,u=1==i.length;try{r=i[d].call(this,a)}catch(f){continue}if(h=[[r[0]],r[1]],r[1].length>0&&!u)try{l=n.call(this,r[1])}catch(p){u=!0}else u=!0;if(u||0!==l[1].length||(u=!0),!u){for(var m=[],g=0;i.length>g;g++)d!=g&&m.push(i[g]);o=t.set(m,n).call(this,l[1]),o[0].length>0&&(h[0]=h[0].concat(o[0]),h[1]=o[1])}if(h[1].length<c[1].length&&(c=h),0===c[1].length)break}if(0===c[0].length)return c;if(s){try{l=s.call(this,c[1])}catch(v){throw new e.Exception(c[1])}c[1]=l[1]}return c}},forward:function(e,t){return function(i){return e[t].call(this,i)}},replace:function(e,t){return function(i){var n=e.call(this,i);return[t,n[1]]}},process:function(e,t){return function(i){var n=e.call(this,i);return[t.call(this,n[0]),n[1]]}},min:function(t,i){return function(n){var s=i.call(this,n);if(t>s[0].length)throw new e.Exception(n);return s}}},i=function(e){return function(){var t=null,i=[];if(arguments.length>1?t=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(t=arguments[0]),!t)return e.apply(null,arguments);for(var n=0,s=t.shift();s.length>n;n++)return t.unshift(s[n]),i.push(e.apply(null,t)),t.shift(),i}},n="optional not ignore cache".split(/\s/),s=0;n.length>s;s++)t[n[s]]=i(t[n[s]]);for(var a=function(e){return function(){return arguments[0]instanceof Array?e.apply(null,arguments[0]):e.apply(null,arguments)}},o="each any all".split(/\s/),l=0;o.length>l;l++)t[o[l]]=a(t[o[l]])}(),function(){var e=Date;e.prototype,e.CultureInfo;var t=function(e){for(var i=[],n=0;e.length>n;n++)e[n]instanceof Array?i=i.concat(t(e[n])):e[n]&&i.push(e[n]);return i};e.Grammar={},e.Translator={hour:function(e){return function(){this.hour=Number(e)}},minute:function(e){return function(){this.minute=Number(e)}},second:function(e){return function(){this.second=Number(e)}},meridian:function(e){return function(){this.meridian=e.slice(0,1).toLowerCase()}},timezone:function(e){return function(){var t=e.replace(/[^\d\+\-]/g,"");t.length?this.timezoneOffset=Number(t):this.timezone=e.toLowerCase()}},day:function(e){var t=e[0];return function(){this.day=Number(t.match(/\d+/)[0])}},month:function(e){return function(){this.month=3==e.length?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(e)/4:Number(e)-1}},year:function(e){return function(){var t=Number(e);this.year=e.length>2?t:t+(Date.CultureInfo.twoDigitYearMax>t+2e3?2e3:1900)}},rday:function(e){return function(){switch(e){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(t){t=t instanceof Array?t:[t];for(var i=0;t.length>i;i++)t[i]&&t[i].call(this);var n=new Date;if(!this.hour&&!this.minute||this.month||this.year||this.day||(this.day=n.getDate()),this.year||(this.year=n.getFullYear()),this.month||0===this.month||(this.month=n.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&("p"==this.meridian&&12>this.hour?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.day>e.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var s=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?s.set({timezone:this.timezone}):this.timezoneOffset&&s.set({timezoneOffset:this.timezoneOffset}),s},finish:function(i){if(i=i instanceof Array?t(i):[i],0===i.length)return null;for(var n=0;i.length>n;n++)"function"==typeof i[n]&&i[n].call(this);var s=e.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(s=new Date);var a,r,o,l=!!(this.days&&null!==this.days||this.orient||this.operator);if(o="past"==this.orient||"subtract"==this.operator?-1:1,"lastDayOf"==this.orient){var h=new Date(this.year||s.getFullYear(),this.month+1,0);if(h.getDate())return!this.year&&(h.getMonth()<s.getMonth()||h.getMonth()==s.getMonth()&&h.getDate()<s.getDate())&&h.addYears(1),h}if("firstDayOf"==this.orient){var c=new Date(this.year||s.getFullYear(),this.month,1);if(c.getDate())return!this.year&&(c.getMonth()<s.getMonth()||c.getMonth()==s.getMonth()&&c.getDate()<s.getDate())&&c.addYears(1),c}if(this.now||-1=="hour minute second".indexOf(this.unit)||s.setTimeToNow(),(this.month||0===this.month)&&-1!="year day hour minute second".indexOf(this.unit)&&(this.value=this.month+1,this.month=null,l=!0),!l&&this.weekday&&!this.day&&!this.days){var u=Date[this.weekday]();this.day=u.getDate(),this.month||(this.month=u.getMonth()),this.year=u.getFullYear()}if(l&&this.weekday&&"month"!=this.unit&&(this.unit="day",a=e.getDayNumberFromName(this.weekday)-s.getDay(),r=7,this.days=a?(a+o*r)%r:o*r),this.month&&"day"==this.unit&&this.operator&&(this.value=this.month+1,this.month=null),null!=this.value&&null!=this.month&&null!=this.year&&(this.day=1*this.value),this.month&&!this.day&&this.value&&(s.set({day:1*this.value}),l||(this.day=1*this.value)),this.month||!this.value||"month"!=this.unit||this.now||(this.month=this.value,l=!0),l&&(this.month||0===this.month)&&"year"!=this.unit&&(this.unit="month",a=this.month-s.getMonth(),r=12,this.months=this.value,this.month=null),this.unit||(this.unit="day"),!this.value&&this.operator&&null!==this.operator&&this[this.unit+"s"]&&null!==this[this.unit+"s"]?this[this.unit+"s"]=this[this.unit+"s"]+("add"==this.operator?1:-1)+(this.value||0)*o:(null==this[this.unit+"s"]||null!=this.operator)&&(this.value||(this.value=1),this[this.unit+"s"]=this.value*o),this.meridian&&this.hour&&("p"==this.meridian&&12>this.hour?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.weekday&&!this.day&&!this.days){var u=Date[this.weekday]();this.day=u.getDate(),u.getMonth()!==s.getMonth()&&(this.month=u.getMonth())}return!this.month&&0!==this.month||this.day||(this.day=1),this.orient||this.operator||"week"!=this.unit||!this.value||this.day||this.month||this.value&&(this.operator="add",l=!0),void 0!=this.month&&"week"==this.unit&&(this.value=this.month+1,this[this.unit+"s"]=this.value,this.operator="add",this.month=null,this.day=null,l=!0),"month"==this.unit&&1==this.day&&1==this.value&&(this.operator="add",this.value=this[this.unit+"s"]=this.month+1,this.day=this.month=null,l=!0),l&&this.timezone&&this.day&&this.days&&(this.day=this.days),l?s.add(this):s.set(this)}};var i,n=e.Parsing.Operators,s=e.Grammar,a=e.Translator;s.datePartDelimiter=n.rtoken(/^([\s\-\.\,\/\x27]+)/),s.timePartDelimiter=n.stoken(":"),s.whiteSpace=n.rtoken(/^\s*/),s.generalDelimiter=n.rtoken(/^(([\s\,]|at|@|on)+)/);var r={};s.ctoken=function(e){var t=r[e];if(!t){for(var i=Date.CultureInfo.regexPatterns,s=e.split(/\s+/),a=[],o=0;s.length>o;o++)a.push(n.replace(n.rtoken(i[s[o]]),s[o]));t=r[e]=n.any.apply(null,a)}return t},s.ctoken2=function(e){return n.rtoken(Date.CultureInfo.regexPatterns[e])},s.h=n.cache(n.process(n.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),a.hour)),s.hh=n.cache(n.process(n.rtoken(/^(0[0-9]|1[0-2])/),a.hour)),s.H=n.cache(n.process(n.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),a.hour)),s.HH=n.cache(n.process(n.rtoken(/^([0-1][0-9]|2[0-3])/),a.hour)),s.m=n.cache(n.process(n.rtoken(/^([0-5][0-9]|[0-9])/),a.minute)),s.mm=n.cache(n.process(n.rtoken(/^[0-5][0-9]/),a.minute)),s.s=n.cache(n.process(n.rtoken(/^([0-5][0-9]|[0-9])/),a.second)),s.ss=n.cache(n.process(n.rtoken(/^[0-5][0-9]/),a.second)),s.hms=n.cache(n.sequence([s.H,s.m,s.s],s.timePartDelimiter)),s.t=n.cache(n.process(s.ctoken2("shortMeridian"),a.meridian)),s.tt=n.cache(n.process(s.ctoken2("longMeridian"),a.meridian)),s.z=n.cache(n.process(n.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),a.timezone)),s.zz=n.cache(n.process(n.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),a.timezone)),s.zzz=n.cache(n.process(s.ctoken2("timezone"),a.timezone)),s.timeSuffix=n.each(n.ignore(s.whiteSpace),n.set([s.tt,s.zzz])),s.time=n.each(n.optional(n.ignore(n.stoken("T"))),s.hms,s.timeSuffix),s.d=n.cache(n.process(n.each(n.rtoken(/^([0-2]\d|3[0-1]|\d)/),n.optional(s.ctoken2("ordinalSuffix"))),a.day)),s.dd=n.cache(n.process(n.each(n.rtoken(/^([0-2]\d|3[0-1])/),n.optional(s.ctoken2("ordinalSuffix"))),a.day)),s.ddd=s.dddd=n.cache(n.process(s.ctoken("sun mon tue wed thu fri sat"),function(e){return function(){this.weekday=e}})),s.M=n.cache(n.process(n.rtoken(/^(1[0-2]|0\d|\d)/),a.month)),s.MM=n.cache(n.process(n.rtoken(/^(1[0-2]|0\d)/),a.month)),s.MMM=s.MMMM=n.cache(n.process(s.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),a.month)),s.y=n.cache(n.process(n.rtoken(/^(\d\d?)/),a.year)),s.yy=n.cache(n.process(n.rtoken(/^(\d\d)/),a.year)),s.yyy=n.cache(n.process(n.rtoken(/^(\d\d?\d?\d?)/),a.year)),s.yyyy=n.cache(n.process(n.rtoken(/^(\d\d\d\d)/),a.year)),i=function(){return n.each(n.any.apply(null,arguments),n.not(s.ctoken2("timeContext")))},s.day=i(s.d,s.dd),s.month=i(s.M,s.MMM),s.year=i(s.yyyy,s.yy),s.orientation=n.process(s.ctoken("lastDayOf firstDayOf past future"),function(e){return function(){this.orient=e}}),s.operator=n.process(s.ctoken("add subtract"),function(e){return function(){this.operator=e}}),s.rday=n.process(s.ctoken("yesterday tomorrow today now"),a.rday),s.unit=n.process(s.ctoken("second minute hour day week month year"),function(e){return function(){this.unit=e}}),s.value=n.process(n.rtoken(/^\d\d?(st|nd|rd|th)?/),function(e){return function(){this.value=e.replace(/\D/g,"")}}),s.expression=n.set([s.rday,s.operator,s.value,s.unit,s.orientation,s.ddd,s.MMM,s.yyyy]),i=function(){return n.set(arguments,s.datePartDelimiter)},s.mdy=i(s.ddd,s.month,s.day,s.year),s.ymd=i(s.ddd,s.year,s.month,s.day),s.dmy=i(s.ddd,s.day,s.month,s.year),s.date=function(e){return(s[Date.CultureInfo.dateElementOrder]||s.mdy).call(this,e)},s.format=n.process(n.many(n.any(n.process(n.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(t){if(s[t])return s[t];throw e.Parsing.Exception(t)}),n.process(n.rtoken(/^[^dMyhHmstz]+/),function(e){return n.ignore(n.stoken(e))}))),function(e){return n.process(n.each.apply(null,e),a.finishExact)});var o={},l=function(e){return o[e]=o[e]||s.format(e)[0]};s.formats=function(e){if(e instanceof Array){for(var t=[],i=0;e.length>i;i++)t.push(l(e[i]));return n.any.apply(null,t)}return l(e)},s._formats=s.formats([]),s._start=n.process(n.set([s.date,s.time,s.expression],s.generalDelimiter,s.whiteSpace),a.finish),s.start=function(e){try{var t=s._formats.call({},e);if(0===t[1].length)return t}catch(i){}return s._start.call({},e)},e._parse=e.parse,e.parse=function(t){var i=null;if(!t)return null;if(t instanceof Date)return t;try{i=e.Grammar.start.call({},t.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(n){return null}return 0===i[1].length?i[0]:null},e.getParseFunction=function(t){var i=e.Grammar.formats(t);return function(e){var t=null;try{t=i.call({},e)}catch(n){return null}return 0===t[1].length?t[0]:null}},e.parseExact=function(t,i){return e.getParseFunction(i)(t)}}();var parseDateString=function(e,t,i){var n=Date.parse(e);if(null!=n){var s=n.toUnixTimestamp();return i&&(s-=60*n.getTimezoneOffset()),t?""+n:s}return null};angular.module("ADE",[]).factory("ADE",["$rootScope",function(e){function t(e,t){var i={};return angular.isObject(e)?i=e:angular.isString(e)&&e.length>0&&(i=angular.fromJson(e)),$.each(t,function(e,t){angular.isDefined(i[e])||(i[e]=t)}),i}function i(t){t.id&&e.$broadcast("ADE-start",t.id)}function n(t,i,n,s){t.id&&e.$broadcast("ADE-finish",{id:t.id,oldVal:i,newVal:n,exit:s})}function s(e,t){e.bind("blur.ADE",function(){t(0)})}function a(e){e.unbind("blur.ADE")}function r(e,t,i){u=!0,e.bind("keydown.ADE",function(e){if(9==e.keyCode){e.preventDefault(),e.stopPropagation();var i=e.shiftKey?-1:1;t(i)}else 27==e.keyCode&&(e.preventDefault(),e.stopPropagation(),t(3))}),i!==!0&&e.bind("keypress.ADE",function(e){if(13==e.keyCode&&u){e.preventDefault(),e.stopPropagation();var i=e.shiftKey?-2:2;t(i)}})}function o(e){e.unbind("keydown.ADE"),e.unbind("keypress.ADE"),u=!1}var l="btn btn-mini btn-primary",h="ade-popup",c=["heart","film","music","camera","shopping-cart","flag","picture","gift","calendar","time","thumbs-up","thumbs-down","hand-right","hand-left","info-sign","question-sign","exclamation-sign","trophy","pushpin","warning-sign","leaf","tint","coffee","magnet","envelope","inbox","bookmark","file","bell","asterisk","globe","plane","road","lock","book","wrench","home","briefcase","map-marker","eye-open","medkit","lightbulb","food","laptop","circle","money","bullhorn","legal","facebook","twitter"];e.ADE_hidePopup=function(e){var t=e?e.next("."+h):angular.element("."+h);t.length&&t.hasClass("open")&&t.removeClass("open").remove()};var u=!1;return{parseSettings:t,begin:i,done:n,setupBlur:s,teardownBlur:a,setupKeys:r,teardownKeys:o,icons:c,popupClass:h,miniBtnClasses:l}}]),angular.module("ADE").directive("adeNumber",["ADE","$compile",function(e,t){return{require:"?ngModel",restrict:"A",link:function(i,n,s,a){var r={},o=!1,l=null,h="",c="",u=0;null!==a&&void 0!==a&&(a.$render=function(){return c=h=a.$modelValue,(void 0===h||null===h)&&(h=""),a.$viewValue});var d=function(t){c=h,u=t,3!=t&&(h=l.val(),h=h.replace(/[^0-9.-]/g,""),h=parseFloat(h),isNaN(h)&&(h=""),a.$setViewValue(h)),e.teardownKeys(l),e.teardownBlur(l),n.show(),l.remove(),o=!1,e.done(r,c,h,u),i.$digest()};return n.bind("click",function(){o||(o=!0,u=0,e.begin(r),angular.isArray(h)&&h.length>0&&(h=h[0]),angular.isString(h)?h=parseFloat(h.replace(/[$]/g,"")):angular.isNumber(h)||(h=""),h=h?h:"",n.hide(),t('<input type="text" class="'+r.className+'" value="'+h+'" />')(i).insertAfter(n),l=n.next("input"),l.focus(),e.setupBlur(l,d),e.setupKeys(l,d),l.bind("keypress.ADE",function(e){e.keyCode>=48&&57>=e.keyCode||36==e.keyCode||37==e.keyCode||44==e.keyCode||45==e.keyCode||46==e.keyCode||(e.preventDefault(),e.stopPropagation())
}))}),s.$observe("adeNumber",function(t){return r=e.parseSettings(t,{className:"input-small"}),n})}}}]),angular.module("ADE").directive("adeUrl",["ADE","$compile","$filter",function(e,t,i){return{require:"?ngModel",restrict:"A",link:function(n,s,a,r){var o={},l=!1,h=null,c="",u="",d=0,f=null;null!==r&&void 0!==r&&(r.$render=function(){return u=c=r.$modelValue,(void 0===c||null===c)&&(c=""),r.$viewValue});var p=function(t){u=c,d=t,3!==d&&h&&(c=h.val(),r.$setViewValue(c)),s.show(),n.ADE_hidePopup(),h&&h.remove(),l=!1,e.done(o,u,c,d),n.$digest()},m=function(){f&&window.clearTimeout(f),l=!0,d=0,e.begin(o),angular.isString(c)||(c=""+c),s.hide(),n.ADE_hidePopup(),t('<input type="text" class="'+o.className+'" value="'+c.replace(/"/g,"&quot;")+'" />')(n).insertAfter(s),h=s.next("input"),h.focus(),e.setupBlur(h,p),e.setupKeys(h,p)};return s.bind("click",function(a){if(a.preventDefault(),a.stopPropagation(),!l){var r=""+c,h=!1,u=s.offset(),d=u.left,g=u.top+s[0].offsetHeight,v="";switch(o.type){case"email":h=i("email")(c).match("mailto:"),r.match("mailto:")||(r="mailto:"+r),v='<div class="'+e.popupClass+' ade-links dropdown-menu open" style="left:'+d+"px;top:"+g+'px">'+'<a class="'+e.miniBtnClasses+'" href="'+r+'" ng-click="ADE_hidePopup();">Send Email</a>'+' or <a class="'+e.miniBtnClasses+' ade-edit-link">Edit</a>'+'<div class="ade-hidden"><input class="invisinput" type="text" /></div>'+"</div>";break;case"phone":h=i("phone")(c).match("tel:"),r.match("tel:")||(r="tel:"+r),v='<div class="'+e.popupClass+' ade-links dropdown-menu open" style="left:'+d+"px;top:"+g+'px">'+'<a class="'+e.miniBtnClasses+'" href="'+r+'" ng-click="ADE_hidePopup();">Call Number</a>'+' or <a class="'+e.miniBtnClasses+' ade-edit-link">Edit</a>'+'<div class="ade-hidden"><input class="invisinput" type="text" /></div>'+"</div>";break;default:h=i("url")(c).match(/https?:/),r.match(/https?:/)||(r="http://"+r),v='<div class="'+e.popupClass+' ade-links dropdown-menu open" style="left:'+d+"px;top:"+g+'px">'+'<a class="'+e.miniBtnClasses+'" href="'+r+'" target="_blank" ng-click="ADE_hidePopup();">Follow Link</a>'+' or <a class="'+e.miniBtnClasses+' ade-edit-link">Edit</a>'+'<div class="ade-hidden"><input class="invisinput" type="text" /></div>'+"</div>"}if(""!==c&&h){if(!s.next("."+e.popupClass).length){t(v)(n).insertAfter(s);var y=s.next(".ade-links").find(".ade-edit-link");y.bind("click",m);var w=s.next(".ade-links").find(".invisinput");w.focus(),e.setupKeys(w,p),w.bind("blur",function(){f=window.setTimeout(function(){n.ADE_hidePopup(s)},300)})}}else m()}}),a.$observe("adeUrl",function(t){return o=e.parseSettings(t,{className:"input-medium",type:"http"}),s})}}}]),!function(e){var t=function(t,n){if(this.element=e(t),this.picker=e(i.template).appendTo("body").on({click:e.proxy(this.click,this),mousedown:e.proxy(this.mousedown,this)}),this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on"):!1,this.isInput?this.element.on({focus:e.proxy(this.show,this),blur:e.proxy(this.hide,this),keyup:e.proxy(this.update,this)}):this.component?this.component.on("click",e.proxy(this.show,this)):this.element.on("click",e.proxy(this.show,this)),this.minViewMode=n.minViewMode||this.element.data("date-minviewmode")||0,"string"==typeof this.minViewMode)switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}if(this.viewMode=n.viewMode||this.element.data("date-viewmode")||0,"string"==typeof this.viewMode)switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0}this.startViewMode=this.viewMode,this.weekStart=n.weekStart||this.element.data("date-weekstart")||0,this.weekEnd=0===this.weekStart?6:this.weekStart-1,this.fillDow(),this.fillMonths(),this.update(),this.showMode()};t.prototype={constructor:t,show:function(t){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),e(window).on("resize",e.proxy(this.place,this)),t&&(t.stopPropagation(),t.preventDefault()),this.isInput||e(document).on("mousedown",e.proxy(this.hide,this)),this.element.trigger({type:"show",date:this.date})},hide:function(){this.picker.hide(),e(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||e(document).off("mousedown",this.hide),this.set(),this.element.trigger({type:"hide",date:this.date})},remove:function(){this.picker.remove()},set:function(){this.element.trigger({type:"changeDate",date:this.date?this.date.getTime():null})},setValue:function(e){this.date=e?"string"==typeof e?i.parseDate(e):new Date(1e3*e):null,this.set(),this.viewDate=e&&this.date?new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0):null,this.fill()},place:function(){var t=this.component?this.component.offset():this.element.offset();this.picker.css({top:t.top+this.height,left:t.left});var i=e(window).height(),n=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,s=this.picker[0].offsetTop+this.picker[0].offsetHeight;s-n>i&&this.picker.css({top:t.top-this.picker[0].offsetHeight,left:t.left})},update:function(e){this.date=i.parseDate("string"==typeof e?e:this.isInput?this.element.prop("value"):this.element.data("date")),this.viewDate=this.date?new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0):new Date,this.fill()},fillDow:function(){for(var e=this.weekStart,t="<tr>";this.weekStart+7>e;)t+='<th class="dow">'+i.dates.daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){for(var e="",t=0;12>t;)e+='<span class="month">'+i.dates.monthsShort[t++]+"</span>";this.picker.find(".datepicker-months td").append(e)},fill:function(){var e=new Date(this.viewDate),t=e.getFullYear(),n=e.getMonth(),s=new Date,a=s.getDate(),r=s.getMonth(),o=null;this.date&&(o=new Date(this.date.getFullYear(),this.date.getMonth(),this.date.getDate()).valueOf()),this.picker.find(".datepicker-days th:eq(1)").text(i.dates.months[n]+" "+t);var l=new Date(t,n-1,28,0,0,0,0),h=i.getDaysInMonth(l.getFullYear(),l.getMonth());l.setDate(h),l.setDate(h-(l.getDay()-this.weekStart+7)%7);var c=new Date(l);c.setDate(c.getDate()+42),c=c.valueOf();for(var u,d=[];c>l.valueOf();)l.getDay()===this.weekStart&&d.push("<tr>"),u="",n>l.getMonth()?u+=" old":l.getMonth()>n&&(u+=" new"),l.valueOf()===o&&(u+=" active"),l.getMonth()===r&&l.getDate()===a&&(u+=" today"),d.push('<td class="day'+u+'">'+l.getDate()+"</td>"),l.getDay()===this.weekEnd&&d.push("</tr>"),l.setDate(l.getDate()+1);this.picker.find(".datepicker-days tbody").empty().append(d.join(""));var f=this.date?this.date.getFullYear():null,p=this.picker.find(".datepicker-months").find("th:eq(1)").text(t).end().find("span").removeClass("active");if(f===t){var m=this.date?this.date.getMonth():null;m&&p.eq(m).addClass("active")}d="",t=10*parseInt(t/10,10);var g=this.picker.find(".datepicker-years").find("th:eq(1)").text(t+"-"+(t+9)).end().find("td");t-=1;for(var v=-1;11>v;v++)d+='<span class="year'+(-1===v||10===v?" old":"")+(f===t?" active":"")+'">'+t+"</span>",t+=1;g.html(d)},click:function(t){t.stopPropagation(),t.preventDefault();var n=e(t.target).closest("span, td, th");if(1===n.length)switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"switch":this.showMode(1);break;case"prev":case"next":this.viewDate["set"+i.modes[this.viewMode].navFnc].call(this.viewDate,this.viewDate["get"+i.modes[this.viewMode].navFnc].call(this.viewDate)+i.modes[this.viewMode].navStep*("prev"===n[0].className?-1:1)),this.fill(),this.set()}break;case"span":if(n.is(".month")){var s=n.parent().find("span").index(n);this.viewDate.setMonth(s)}else{var a=parseInt(n.text(),10)||0;this.viewDate.setFullYear(a)}0!==this.viewMode&&(this.date=new Date(this.viewDate)),this.showMode(-1),this.fill(),this.set();break;case"td":if(n.is(".day")){var r=parseInt(n.text(),10)||1,s=this.viewDate.getMonth();n.is(".old")?s-=1:n.is(".new")&&(s+=1);var a=this.viewDate.getFullYear();this.date=new Date(a,s,r,0,0,0,0),this.viewDate=new Date(a,s,Math.min(28,r),0,0,0,0),this.fill(),this.set()}}},mousedown:function(e){e.stopPropagation(),e.preventDefault()},showMode:function(e){e&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+e))),this.picker.find(">div").hide().filter(".datepicker-"+i.modes[this.viewMode].clsName).show()}},e.fn.datepicker=function(i,n){return this.each(function(){var s=e(this),a=s.data("datepicker"),r="object"==typeof i&&i;a||s.data("datepicker",a=new t(this,e.extend({},e.fn.datepicker.defaults,r))),"string"==typeof i&&a[i](n)})},e.fn.datepicker.defaults={},e.fn.datepicker.Constructor=t;var i={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],dates:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},isLeapYear:function(e){return 0===e%4&&0!==e%100||0===e%400},getDaysInMonth:function(e,t){return[31,i.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},parseDate:function(e){if(!e)return null;var t=new Date,i=parseDateString(e);return i?(t.setTime(1e3*i),t):null},headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};i.template='<div class="datepicker dropdown-menu"><div class="datepicker-days"><table class=" table-condensed">'+i.headTemplate+"<tbody></tbody>"+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+i.headTemplate+i.contTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+i.headTemplate+i.contTemplate+"</table>"+"</div>"+"</div>"}(window.jQuery),angular.module("ADE").filter("validDate",["$filter",function(e){return function(t,i){if(angular.isUndefined(t))return"";var n=t,s=t,a="";angular.isArray(t)&&(n=t[0],s=t[1],a=t[2],0>s&&(s=0),0>n&&(n=0),s||(s=n),n||(n=s));var r=i,o=!0,l=!1;if(angular.isArray(i)&&(r=i[0],void 0!==i[1]&&(o=i[1]),void 0!==i[2]&&(l=i[2])),!t||!n)return"";if(angular.isString(n)){var h=parseInt(n);n===h+""?n=h:(n=parseDateString(n),s=n)}var c=(new Date).getTimezoneOffset(),u="";if(angular.isNumber(n)&&(o?(s+=60*c,u=e("date")(1e3*s,r)):u=e("date")(1e3*n,r)),o&&l&&c!==a){var d=(c-a)/60;d>0&&(d="+"+d),u+=" ("+d+" h)"}return u}}]),angular.module("ADE").directive("adeCalpop",["$filter",function(e){return{require:"?ngModel",restrict:"A",link:function(t,i,n,s){var a="mm/dd/yyy";i.bind("keypress",function(e){13==e.keyCode?(e.preventDefault(),e.stopPropagation(),i.datepicker("hide"),i.blur()):27==e.keyCode&&i.datepicker("hide")});var r=function(n){var r="";n.date&&(r=e("date")(n.date,a)),i.context.value=r,void 0!==s&&null!==s&&s.$setViewValue(r),t.$$phase||t.$digest()};return void 0!==s&&null!==s&&(s.$render=function(){return s.$viewValue?(i.datepicker().data().datepicker.date=s.$viewValue,i.datepicker("setValue",s.$viewValue),i.datepicker("update")):null===s.$viewValue&&(i.datepicker("setValue",null),i.datepicker("update")),s.$viewValue}),n.$observe("adeCalpop",function(e){var t={};return angular.isObject(e)&&(t=e),"string"==typeof e&&e.length>0&&(t=angular.fromJson(e)),t.format&&(a=t.format),i.datepicker(t).on("changeDate",r)})}}}]),angular.module("ADE").directive("adeDate",["ADE","$compile",function(e,t){return{require:"?ngModel",restrict:"A",link:function(i,n,s,a){var r={},o=!1,l=null,h=null,c=null,u=0;null!==a&&void 0!==a&&(a.$render=function(){return c=h=a.$modelValue,(void 0===h||null===h)&&(h=0),a.$viewValue});var d=function(t){if(c=h,u=t,3!=t){if(h=parseDateString(l.val()),null==h||0>=h)h=[0,0,0];else{var s=(new Date).getTimezoneOffset();h=[h,h-60*s,s]}void 0!==a&&null!==a&&a.$setViewValue(h)}n.show(),e.teardownBlur(l),e.teardownKeys(l),l.datepicker("remove"),l.scope().$destroy(),l.remove(),o=!1,e.done(r,c,h,u),i.$digest()};return n.bind("click",function(){if(!o){o=!0,u=0;var s=h;if(angular.isArray(h)&&h.length>0&&(s=h[0],r.absolute&&void 0!==h[1]&&(s=h[1],s&&(s+=60*(new Date).getTimezoneOffset()))),angular.isString(s)){var a=parseInt(s.replace(/[$]/g,""));s=s===a+""?a:parseDateString(s)}else angular.isNumber(s)||(s=0);s=s?s:0,e.begin(r),n.hide();var c="";"yyyy"==r.format&&(c=',"viewMode":2,"minViewMode":2');var f='<input ng-controller="adeDateDummyCtrl" ade-calpop=\'{"format":"'+r.format+'"'+c+'}\' ng-model="adePickDate" ng-init="adePickDate='+s+'" type="text" class="'+r.className+'" />';t(f)(i).insertAfter(n),l=n.next("input"),l.focus(),setTimeout(function(){l.focus()}),e.setupBlur(l,d),e.setupKeys(l,d),i.$parent&&i.$parent.$localApply?i.$parent.$localApply():i.$apply()}}),s.$observe("adeDate",function(t){return r=e.parseSettings(t,{className:"input-medium",format:"MMM d, yyyy",absolute:!0}),n})}}}]),angular.module("ADE").filter("decimal",["$filter",function(e){return function(t,i){var n="",i=i||2;return angular.isArray(t)&&(t=t[0]),angular.isString(t)&&(t=parseFloat(t)),angular.isUndefined(t)||!angular.isNumber(t)?n:n=e("number")(t,i)}}]),angular.module("ADE").filter("email",["$filter",function(e){return function(t){return t?(angular.isArray(t)&&(t=t[0]),angular.isString(t)?e("linky")(t):t+""):""}}]),angular.module("ADE").directive("adeIcon",["ADE","$compile",function(e,t){var i=e.icons.length,n="";i>0&&(n='<a class="ade-clear">clear</a>');for(var s=0;i>s;s++)n+='<span class="icon-'+e.icons[s]+'"></span>';return{require:"?ngModel",restrict:"A",link:function(i,s,a,r){var o={},l="",h="",c=!1,u=0,d=null,f=null;null!==r&&void 0!==r&&(r.$render=function(){return h=l=r.$modelValue,(void 0===l||null===l)&&(l=""),r.$viewValue});var p=function(t,n){window.clearTimeout(f),h=l,l=n||h,u=t,3!==u&&r.$setViewValue(l),c=!1,i.ADE_hidePopup(),e.done(o,h,l,u),1==u?(s.data("dontclick",!0),s.focus()):-1==u&&(s.data("dontclick",!0),s.focus()),i.$digest()},m=function(){var e=$("#adeIconBox"),t=s.offset(),i=t.left-7,n=t.top+s[0].offsetHeight;e.css({left:i,top:n});var a=$(window).height(),r=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,o=e[0].offsetTop+e[0].offsetHeight;o-r>a&&e.css({top:n-e[0].offsetHeight-s.height()-5,left:i}).addClass("flip")};return s.bind("click",function(a){s.unbind("keypress.ADE"),a.preventDefault(),a.stopPropagation(),e.begin(o);var r=angular.element("."+e.popupClass),l=angular.element(a.target),h=l.attr("class"),u=angular.isDefined(h)&&null!==h.match("icon")&&h.match("icon").length&&l.parent()[0]==s[0],g=l[0]==s[0];if(!(!u&&!g||r&&r.length)){c=!0,t('<div id="adeIconBox" class="'+e.popupClass+' ade-icons dropdown-menu open"><h4>Select an Icon</h4>'+n+'<div class="ade-hidden"><input id="invisicon" type="text" /></div></div>')(i).insertAfter(s),m(),d=angular.element("#invisicon");var v=s.next(".ade-popup"),y=v.find(".ade-clear"),w=v.find("span");y.bind("click",function(){p(0,"ban-circle")}),angular.forEach(w,function(e){var t=angular.element(e);t.bind("click",function(){window.clearTimeout(f);var e=t.attr("class");if(e.match("icon")){var i=e.substr(5);p(0,i)}})}),d.focus(),e.setupKeys(d,p),d.bind("blur",function(){f=window.setTimeout(function(){p(0)},500)})}}),s.bind("focus",function(){return s.data("dontclick")?(window.setTimeout(function(){s.data("dontclick",!1)},100),s.bind("keypress.ADE",function(e){13==e.keyCode&&(e.preventDefault(),e.stopPropagation(),s.click())}),void 0):(s.click(),void 0)}),s.bind("blur",function(){s.unbind("keypress.ADE")}),a.$observe("adeIcon",function(t){return o=e.parseSettings(t,{}),s})}}}]),angular.module("ADE").filter("icon",["ADE",function(e){return function(t){angular.isArray(t)&&(t=t[0]),t||(t="ban-circle");for(var i=!1,n=e.icons.length,s=0;n>s;s++)if(t===e.icons[s]){i=!0;break}return i||(t="ban-circle"),'<span class="ade-icon icon-'+t+'">'}}]),angular.module("ADE").filter("integer",["$filter",function(e){return function(t){var i="";return angular.isArray(t)&&(t=t[0]),angular.isString(t)&&(t=parseFloat(t)),angular.isUndefined(t)||!angular.isNumber(t)?i:i=e("number")(t,0)}}]),angular.module("ADE").directive("adeDuration",["ADE","$compile","$filter",function(e,t,i){return{require:"?ngModel",restrict:"A",link:function(n,s,a,r){var o={},l=!1,h=null,c="",u="",d=0;null!==r&&void 0!==r&&(r.$render=function(){return u=c=r.$modelValue,(void 0===c||null===c)&&(c=""),r.$viewValue});var f=function(t){u=c,d=t,3!=t&&(c=h.val(),r.$setViewValue(c)),s.show(),h.remove(),l=!1,e.done(o,u,c,d),n.$digest()};return s.bind("click",function(){l||(l=!0,d=0,c=i("duration")(c),e.begin(o),s.hide(),t('<input type="text" class="'+o.className+'" value="'+c+'" />')(n).insertAfter(s),h=s.next("input"),h.focus(),e.setupBlur(h,f),e.setupKeys(h,f))}),a.$observe("adeDuration",function(t){return o=e.parseSettings(t,{className:"input-medium"}),s})}}}]),angular.module("ADE").filter("duration",function(){function e(e){var t="",i=0,n=0;return 60>e&&e>0?t=1===e?e+"min":e+"mins":e>=60?(n=e%60,i=Math.round((e-n)/60),t=1===i?i+"hr":i+"hrs",n>0&&(t+=1===n?" "+n+"min":" "+n+"mins")):t="",t}function t(e){var t=parseFloat(e,10);return-1!==e.indexOf("h")&&(t=60*t),Math.round(t)}function i(e){var t=e.split(" ");return 60*parseFloat(t[0],10)+parseFloat(t[1],10)}return function(n){if(!n)return"";angular.isArray(n)&&(n=n[0]);var s="";if(!isNaN(n))return e(n);if(!angular.isString(n))return"";var a=n.split(" ");switch(a.length){case 1:s=t(n),s=e(s);break;case 2:s=i(n),s=e(s);break;default:s=""}return s}}),angular.module("ADE").directive("adeList",["ADE","$compile",function(e,t){return{require:"?ngModel",restrict:"A",link:function(i,n,s,a){var r={},o=!1,l=null,h="",c="",u=0;null!==a&&void 0!==a&&(a.$render=function(){return c=h=a.$modelValue,(void 0===h||null===h)&&(h=""),a.$viewValue});var d=function(t){if(c=h,u=t,3!=t){if(h=l.data().select2.data(),angular.isArray(h))if(h.length>0){var s=[];angular.forEach(h,function(e){s.push(e.text)}),h=s}else h="";else h=angular.isObject(h)&&h.text?h.text:h?h.text:"";a.$setViewValue(h)}n.show(),l.select2("destroy"),l.remove(),o=!1,e.done(r,c,h,u),i.$$phase||i.$digest()},f=function(){l.select2("destroy"),l.remove(),n.show(),e.done(r,c,h,3),o=!1},p=function(e){"singleRemove"===e[0]?d(e.exit):"emptyTabReturn"===e[0]?d(e.exit):"bodyClick"===e[0]?d(0):r.multiple||d(e.exit)};return n.bind("click",function(){if(!o){o=!0,u=0,e.begin(r),n.hide();var s="",a="";r.multiple?s='multiple="multiple"':a=",placeholder:'List...'";var c="";r.query&&(c=",query:"+r.query);var d="";r.selection&&(d=",initSelection:"+r.selection);var m="";r.listId&&(m=",listId:'"+r.listId+"'");var g='<input class="ade-list-input" type="hidden" ui-select2={width:\'resolve\',allowClear:true,openOnEnter:false,searchClear:true,closeOnRemove:false,closeOnSelect:false,allowAddNewValues:true'+c+m+d+a+"} "+s+" />";t(g)(i).insertAfter(n),l=n.next("input"),angular.isString(h)&&(h=h.split(",")),l.val(h),setTimeout(function(){i.selection(l,function(e){l.select2("data",e),l.select2("open")},r.listId)}),l.on("cancel",f),l.on("change",p)}}),s.$observe("adeList",function(t){return r=e.parseSettings(t,{multiple:!1}),n})}}}]),angular.module("ADE").directive("uiSelect2",["$http",function(){var e={};return{require:"?ngModel",compile:function(t,i){var n,s=t.is("select"),a=void 0!==i.multiple;return function(t,i,r,o){var l=angular.extend({},e,t.$eval(r.uiSelect2));if(a&&(l.multiple=!0),o&&(o.$render=function(){a&&!o.$modelValue?i.select2("data",[]):angular.isObject(o.$modelValue)?i.select2("data",o.$modelValue):i.select2("val",o.$modelValue)},n&&t.$watch(n,function(e){e&&setTimeout(function(){i.select2("val",o.$viewValue),i.trigger("change")})}),!s&&(i.bind("change",function(){o.$setViewValue(i.select2("data")),t.$digest()}),l.initSelection))){var h=l.initSelection;l.initSelection=function(e,t){h(e,function(e){o.$setViewValue(e),t(e)},l.listId)}}r.$observe("disabled",function(e){i.select2(e&&"disable"||"enable")}),r.ngMultiple&&t.$watch(r.ngMultiple,function(){i.select2(l)}),i.val(t.$eval(r.ngModel)),setTimeout(function(){i.select2(l)})}}}}]),angular.module("ADE").filter("list",["$filter",function(){return function(e,t){if(!e)return"";if(angular.isString(e))return e;if(!angular.isArray(e))return"";if(t)return e[0];var i="";return $.each(e,function(e,t){i&&(i+=", "),i+=t}),i}}]),function(e){e.fn.each2===void 0&&e.fn.extend({each2:function(t){for(var i=e([0]),n=-1,s=this.length;s>++n&&(i.context=i[0]=this[n])&&t.call(i[0],n,i)!==!1;);return this}})}(jQuery),function(e,t){"use strict";function i(e,i){var n,s=0,a=i.length;if(e===t)return-1;if(e.constructor===String){for(;a>s;s+=1)if(0===e.localeCompare(i[s]))return s}else for(;a>s;s+=1)if(n=i[s],n.constructor===String){if(0===n.localeCompare(e))return s}else if(n===e)return s;return-1}function n(e,i){return e===i?!0:e===t||i===t?!1:null===e||null===i?!1:e.constructor===String?0===e.localeCompare(i):i.constructor===String?0===i.localeCompare(e):!1}function s(t,i){var n,s,a;if(null===t||1>t.length)return[];for(n=t.split(i),s=0,a=n.length;a>s;s+=1)n[s]=e.trim(n[s]);return n}function a(e){return e.outerWidth()-e.width()}function r(i){var n="keyup-change-value";i.bind("keydown",function(){e.data(i,n)===t&&e.data(i,n,i.val())}),i.bind("keyup",function(){var s=e.data(i,n);s!==t&&i.val()!==s&&(e.removeData(i,n),i.trigger("keyup-change"))})}function o(i){i.bind("mousemove",function(i){var n=e.data(document,"select2-lastpos");(n===t||n.x!==i.pageX||n.y!==i.pageY)&&e(i.target).trigger("mousemove-filtered",i)})}function l(e,i,n){n=n||t;var s;return function(){var t=arguments;window.clearTimeout(s),s=window.setTimeout(function(){i.apply(n,t)},e)}}function h(e){var t,i=!1;return function(){return i===!1&&(t=e(),i=!0),t}}function c(e,t){var n=l(e,function(e){t.trigger("scroll-debounced",e)});t.bind("scroll",function(e){i(e.target,t.get())>=0&&n(e)})}function u(e){e.preventDefault(),e.stopPropagation()}function d(t){if(!T){var i=t[0].currentStyle||window.getComputedStyle(t[0],null);T=e("<div></div>").css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"}),e("body").append(T)}return T.text(t.val()),T.width()}function f(e,i,n){var s=e.toUpperCase().indexOf(i.toUpperCase()),a=i.length;return 0>s?(n.push(e),t):(n.push(e.substring(0,s)),n.push("<span class='select2-match'>"),n.push(e.substring(s,s+a)),n.push("</span>"),n.push(e.substring(s+a,e.length)),t)}function p(t){var i,n=0,s=null,a=t.quietMillis||100;return function(r){window.clearTimeout(i),i=window.setTimeout(function(){n+=1;var i=n,a=t.data,o=t.transport||e.ajax,l=t.traditional||!1,h=t.type||"GET";a=a.call(this,r.term,r.page,r.context),null!==s&&s.abort(),s=o.call(null,{url:t.url,dataType:t.dataType,data:a,type:h,traditional:l,success:function(e){if(!(n>i)){var s=t.results(e,r.page);r.callback(s)}}})},a)}}function m(i){var n,s=i,a=function(e){return""+e.text};return e.isArray(s)||(a=s.text,e.isFunction(a)||(n=s.text,a=function(e){return e[n]}),s=s.results),function(i){var n,r=i.term,o={results:[]};return""===r?(i.callback({results:s}),t):(n=function(t,s){var o,l;if(t=t[0],t.children){o={};for(l in t)t.hasOwnProperty(l)&&(o[l]=t[l]);o.children=[],e(t.children).each2(function(e,t){n(t,o.children)}),o.children.length&&s.push(o)}else i.matcher(r,a(t))&&s.push(t)},e(s).each2(function(e,t){n(t,o.results)}),i.callback(o),t)}}function g(i){return e.isFunction(i)?i:function(n){var s=n.term,a={results:[]};e(i).each(function(){var e=this.text!==t,i=e?this.text:this;(""===s||n.matcher(s,i))&&a.results.push(e?this:{id:this,text:this})}),n.callback(a)}}function v(t){if(e.isFunction(t))return!0;if(!t)return!1;throw Error("formatterName must be a function or a falsy value")}function y(t){return e.isFunction(t)?t():t}function w(t){var i=0;return e.each(t,function(e,t){t.children?i+=w(t.children):i++}),i}function b(e,i,s,a){var r,o,l,h,c,u=e,d=!1;if(!a.createSearchChoice||!a.tokenSeparators||1>a.tokenSeparators.length)return t;for(;;){for(o=-1,l=0,h=a.tokenSeparators.length;h>l&&(c=a.tokenSeparators[l],o=e.indexOf(c),!(o>=0));l++);if(0>o)break;if(r=e.substring(0,o),e=e.substring(o+c.length),r.length>0&&(r=a.createSearchChoice(r,i),r!==t&&null!==r&&a.id(r)!==t&&null!==a.id(r))){for(d=!1,l=0,h=i.length;h>l;l++)if(n(a.id(r),a.id(i[l]))){d=!0;break}d||s(r)}}return 0!=u.localeCompare(e)?e:t}function k(t,i){var n=function(){};return n.prototype=new t,n.prototype.constructor=n,n.prototype.parent=t.prototype,n.prototype=e.extend(n.prototype,i),n}if(window.Select2===t){var D,M,S,C,x,T;D={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case D.LEFT:case D.RIGHT:case D.UP:case D.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case D.SHIFT:case D.CTRL:case D.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},x=function(){var e=1;return function(){return e++}}(),e(document).delegate("body","mousemove",function(t){e.data(document,"select2-lastpos",{x:t.pageX,y:t.pageY})}),e(document).ready(function(){e(document).delegate("body","mousedown touchend",function(i){var n,s=e(i.target).closest("div.select2-container").get(0);if(s)e(document).find("div.select2-container-active").each(function(){this!==s&&e(this).data("select2").blur()});else{s=e(i.target).closest("div.select2-drop").get(0),e(document).find("div.select2-drop-active").each(function(){this!==s&&e(this).data("select2").blur()});var a=e(".select2-container");a.length&&e.each(a,function(){e(this).next().hasClass("ade-list-input")&&i.target!==e(this)&&e(this).find(".select2-drop").not(":visible")&&(e(this).data("select2").exit=0,e(this).data("select2").triggerChange(["bodyClick"]))})}s=e(i.target),n=s.attr("for"),"LABEL"===i.target.tagName&&n&&n.length>0&&(s=e("#"+n),s=s.data("select2"),s!==t&&(s.focus(),i.preventDefault()))})}),M=k(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(i){var n,s,a=".select2-results";this.opts=i=this.prepareOpts(i),this.id=i.id,i.element.data("select2")!==t&&null!==i.element.data("select2")&&this.destroy(),this.enabled=!0,this.container=this.createContainer(),this.containerId="s2id_"+(i.element.attr("id")||"autogen"+x()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=h(function(){return i.element.closest("body")}),i.element.attr("class")!==t&&this.container.addClass(i.element.attr("class").replace(/validate\[[\S ]+] ?/,"")),this.container.css(y(i.containerCss)),this.container.addClass(y(i.containerCssClass)),this.opts.element.data("select2",this).hide().before(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.addClass(y(i.dropdownCssClass)),this.dropdown.data("select2",this),this.results=n=this.container.find(a),this.search=s=this.container.find("input.select2-input"),s.attr("tabIndex",this.opts.element.attr("tabIndex")),this.resultsPage=0,this.context=null,this.initContainer(),this.initContainerWidth(),o(this.results),this.dropdown.delegate(a,"mousemove-filtered",this.bind(this.highlightUnderEvent)),c(80,this.results),this.dropdown.delegate(a,"scroll-debounced",this.bind(this.loadMoreIfNeeded)),e.fn.mousewheel&&n.mousewheel(function(e,t,i,s){var a=n.scrollTop();s>0&&0>=a-s?(n.scrollTop(0),u(e)):0>s&&n.get(0).scrollHeight-n.scrollTop()+s<=n.height()&&(n.scrollTop(n.get(0).scrollHeight-n.height()),u(e))}),r(s),s.bind("keyup-change",this.bind(this.updateResults)),s.bind("focus",function(){s.addClass("select2-focused")," "===s.val()&&s.val("")}),s.bind("blur",function(){s.removeClass("select2-focused")}),this.dropdown.delegate(a,"mouseup",this.bind(function(t){e(t.target).closest(".select2-result-selectable:not(.select2-disabled)").length>0?(this.highlightUnderEvent(t),this.selectHighlighted(t)):this.focusSearch(),u(t)})),this.dropdown.bind("click mouseup mousedown",function(e){e.stopPropagation()}),e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),(i.element.is(":disabled")||i.element.is("[readonly='readonly']"))&&this.disable()},destroy:function(){var e=this.opts.element.data("select2");e!==t&&(e.container.remove(),e.dropdown.remove(),e.opts.element.removeData("select2").unbind(".select2").show())},prepareOpts:function(i){var a,r,o,l;if(a=i.element,"select"===a.get(0).tagName.toLowerCase()&&(this.select=r=i.element),r&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in i)throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),i=e.extend({},{populateResults:function(n,s,a){var r,o=this.opts.id,l=this;r=function(n,s,h){var c,u,d,f,p,m,g,v,y;for(c=0,u=n.length;u>c;c+=1)d=n[c],f=o(d)!==t,p=d.children&&d.children.length>0,m=e("<li></li>"),m.addClass("select2-results-dept-"+h),m.addClass("select2-result"),m.addClass(f?"select2-result-selectable":"select2-result-unselectable"),p&&m.addClass("select2-result-with-children"),m.addClass(l.opts.formatResultCssClass(d)),g=e("<div></div>"),g.addClass("select2-result-label"),y=i.formatResult(d,g,a),y!==t&&g.html(l.opts.escapeMarkup(y)),m.append(g),p&&(v=e("<ul></ul>"),v.addClass("select2-result-sub"),r(d.children,v,h+1),m.append(v)),m.data("select2-data",d),s.append(m)},r(s,n,0)}},e.fn.select2.defaults,i),"function"!=typeof i.id&&(o=i.id,i.id=function(e){return e[o]}),r?(i.query=this.bind(function(i){var n,s,r,o={results:[],more:!1},l=i.term;r=function(e,t){var n;e.is("option")?i.matcher(l,e.text(),e)&&t.push({id:e.attr("value"),text:e.text(),element:e.get(),css:e.attr("class")}):e.is("optgroup")&&(n={text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")},e.children().each2(function(e,t){r(t,n.children)}),n.children.length>0&&t.push(n))},n=a.children(),this.getPlaceholder()!==t&&n.length>0&&(s=n[0],""===e(s).text()&&(n=n.not(s))),n.each2(function(e,t){r(t,o.results)}),i.callback(o)}),i.id=function(e){return e.id},i.formatResultCssClass=function(e){return e.css}):"query"in i||("ajax"in i?(l=i.element.data("ajax-url"),l&&l.length>0&&(i.ajax.url=l),i.query=p(i.ajax)):"data"in i?i.query=m(i.data):"tags"in i&&(i.query=g(i.tags),i.createSearchChoice=function(e){return{id:e,text:e}},i.initSelection=function(a,r){var o=[];e(s(a.val(),i.separator)).each(function(){var s=this,a=this,r=i.tags;e.isFunction(r)&&(r=r()),e(r).each(function(){return n(this.id,s)?(a=this.text,!1):t}),o.push({id:s,text:a})}),r(o)})),"function"!=typeof i.query)throw"query function not defined for Select2 "+i.element.attr("id");return i},monitorSource:function(){this.opts.element.bind("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()}))},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val(),exit:this.exit}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},enable:function(){this.enabled||(this.enabled=!0,this.container.removeClass("select2-container-disabled"))},disable:function(){this.enabled&&(this.close(),this.enabled=!1,this.container.addClass("select2-container-disabled"))},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,i,n,s=this.container.offset(),a=this.container.outerHeight(),r=this.container.outerWidth(),o=this.dropdown.outerHeight(),l=e(window).scrollTop()+document.documentElement.clientHeight,h=s.top+a,c=s.left,u=l>=h+o,d=s.top-o>=this.body().scrollTop(),f=this.dropdown.hasClass("select2-drop-above");
"static"!==this.body().css("position")&&(t=this.body().offset(),h-=t.top,c-=t.left),f?(i=!0,!d&&u&&(i=!1)):(i=!1,!u&&d&&(i=!0)),i?(h=s.top-o,this.container.addClass("select2-drop-above"),this.dropdown.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")),n=e.extend({top:h,left:c,width:r},y(this.opts.dropdownCss)),this.dropdown.css(n)},shouldOpen:function(){var t;return this.opened()?!1:(t=e.Event("open"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(window.setTimeout(this.bind(this.opening),1),!0):!1},opening:function(){var t=this.containerId,i=this.containerSelector,n="scroll."+t,s="resize."+t;this.container.parents().each(function(){e(this).bind(n,function(){var t=e(i);0==t.length&&e(this).unbind(n)})}),e(window).bind(s,function(){var t=e(i);0==t.length&&e(window).unbind(s),t.select2("close")}),this.clearDropdownAlignmentPreference()," "===this.search.val()&&this.search.val(""),this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.updateResults(!0),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active"),this.ensureHighlightVisible(),this.focusSearch()},close:function(){if(this.opened()){var t=this;this.container.parents().each(function(){e(this).unbind("scroll."+t.containerId)}),e(window).unbind("resize."+this.containerId),this.clearDropdownAlignmentPreference(),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),this.clearSearch(),this.opts.element.trigger(e.Event("close"))}},clearSearch:function(){},ensureHighlightVisible:function(){var i,n,s,a,r,o,l,h=this.results;if(n=this.highlight(),!(0>n)){if(0==n)return h.scrollTop(0),t;i=h.find(".select2-result-selectable"),s=e(i[n]),a=s.offset().top+s.outerHeight(),n===i.length-1&&(l=h.find("li.select2-more-results"),l.length>0&&(a=l.offset().top+l.outerHeight())),r=h.offset().top+h.outerHeight(),a>r&&h.scrollTop(h.scrollTop()+(a-r)),o=s.offset().top-h.offset().top,0>o&&h.scrollTop(h.scrollTop()+o)}},moveHighlight:function(t){for(var i=this.results.find(".select2-result-selectable"),n=this.highlight();n>-1&&i.length>n;){n+=t;var s=e(i[n]);if(s.hasClass("select2-result-selectable")&&!s.hasClass("select2-disabled")){this.highlight(n);break}}},highlight:function(n,s){var a=this.results.find(".select2-result-selectable").not(".select2-disabled");return 0===arguments.length?i(a.filter(".select2-highlighted")[0],a.get()):(n>=a.length&&(n=a.length-1),0>n&&(n=0),a.removeClass("select2-highlighted"),""!==s&&e(a[n]).addClass("select2-highlighted"),this.ensureHighlightVisible(),t)},countSelectableResults:function(){return this.results.find(".select2-result-selectable").not(".select2-disabled").length},highlightUnderEvent:function(t){var i=e(t.target).closest(".select2-result-selectable");if(i.length>0&&!i.is(".select2-highlighted")){var n=this.results.find(".select2-result-selectable");this.highlight(n.index(i))}else 0==i.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var e,t=this.results,i=t.find("li.select2-more-results"),n=this.resultsPage+1,s=this,a=this.search.val(),r=this.context;0!==i.length&&(e=i.offset().top-t.offset().top-t.height(),0>=e&&(i.addClass("select2-active"),this.opts.query({term:a,page:n,context:r,matcher:this.opts.matcher,callback:this.bind(function(e){s.opened()&&(s.opts.populateResults.call(this,t,e.results,{term:a,page:n,context:r}),e.more===!0?(i.detach().appendTo(t).text(s.opts.formatLoadMore(n+1)),window.setTimeout(function(){s.loadMoreIfNeeded()},10)):i.remove(),s.positionDropdown(),s.resultsPage=n)})})))},tokenize:function(){},updateResults:function(i){function s(){h.scrollTop(0),l.removeClass("select2-active"),u.positionDropdown()}function a(e){h.html(u.opts.escapeMarkup(e)),s()}var r,o,l=this.search,h=this.results,c=this.opts,u=this;if(i===!0||this.showSearchInput!==!1&&this.opened()){if(l.addClass("select2-active"),c.maximumSelectionSize>=1&&(r=this.data(),e.isArray(r)&&r.length>=c.maximumSelectionSize&&v(c.formatSelectionTooBig,"formatSelectionTooBig")))return a("<li class='select2-selection-limit'>"+c.formatSelectionTooBig(c.maximumSelectionSize)+"</li>"),t;if(l.val().length<c.minimumInputLength&&v(c.formatInputTooShort,"formatInputTooShort"))return a("<li class='select2-no-results'>"+c.formatInputTooShort(l.val(),c.minimumInputLength)+"</li>"),t;a("<li class='select2-searching'>"+c.formatSearching()+"</li>"),o=this.tokenize(),o!=t&&null!=o&&l.val(o),this.resultsPage=1,c.query({term:l.val(),page:this.resultsPage,context:null,matcher:c.matcher,callback:this.bind(function(r){var o;if(this.opened()){if(this.context=r.context===t?null:r.context,this.opts.createSearchChoice&&""!==l.val()&&(o=this.opts.createSearchChoice.call(null,l.val(),r.results),o!==t&&null!==o&&u.id(o)!==t&&null!==u.id(o)&&0===e(r.results).filter(function(){return n(u.id(this),u.id(o))}).length&&r.results.unshift(o)),0===r.results.length&&v(c.formatNoMatches,"formatNoMatches"))return a("<li class='select2-no-results'>"+c.formatNoMatches(l.val())+"</li>"),t;h.empty(),u.opts.populateResults.call(this,h,r.results,{term:l.val(),page:this.resultsPage,context:null}),r.more===!0&&v(c.formatLoadMore,"formatLoadMore")&&(h.append("<li class='select2-more-results'>"+u.opts.escapeMarkup(c.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){u.loadMoreIfNeeded()},10)),this.postprocessResults(r,i,l.val()),s()}})})}},cancel:function(){this.close(),this.opts.element.trigger(e.Event("cancel"))},blur:function(){this.close(),this.container.removeClass("select2-container-active"),this.dropdown.removeClass("select2-drop-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){this.search.show(),this.search.focus(),window.setTimeout(this.bind(function(){this.search.show(),this.search.focus(),this.search.val(this.search.val())}),10)},selectHighlighted:function(){var e=this.highlight(),t=this.results.find(".select2-highlighted").not(".select2-disabled"),i=t.closest(".select2-result-selectable").data("select2-data");i?(t.addClass("select2-disabled"),this.highlight(e),this.onSelect(i)):(this.close(),this.focusSearch(),this.triggerChange(["emptyTabReturn"]))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){function i(){var i,n,s,a,r;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth()?"auto":this.opts.element.outerWidth()+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(i=this.opts.element.attr("style"),i!==t)for(n=i.split(";"),a=0,r=n.length;r>a;a+=1)if(s=n[a].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/),null!==s&&s.length>=1)return s[1];return"resolve"===this.opts.width?(i=this.opts.element.css("width"),i.indexOf("%")>0?i:0===this.opts.element.outerWidth()?"auto":this.opts.element.outerWidth()+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var n=i.call(this);null!==n&&this.container.attr("style","width: "+n)}}),S=k(M,{createContainer:function(){var t=e("<div></div>",{"class":"select2-container"}).html(["    <a class='select2-choice'>","   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>","   <div><b></b></div>","</a>","    <div class='select2-drop select2-offscreen'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},opening:function(){this.search.show(),this.parent.opening.apply(this,arguments),this.dropdown.removeClass("select2-offscreen")},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.dropdown.removeAttr("style").addClass("select2-offscreen").insertAfter(this.selection).show())},focus:function(){this.close(),this.selection.focus()},isFocused:function(){return this.selection[0]===document.activeElement},cancel:function(){this.parent.cancel.apply(this,arguments),this.selection.focus()},initContainer:function(){var e,i=this.container,n=this.dropdown,s=!1;this.selection=e=i.find(".select2-choice"),this.search.bind("keydown",this.bind(function(e){if(this.enabled){if(e.which===D.PAGE_UP||e.which===D.PAGE_DOWN)return u(e),t;if(this.opened())switch(e.which){case D.UP:case D.DOWN:return this.moveHighlight(e.which===D.UP?-1:1),u(e),t;case D.TAB:return this.exit=e.shiftKey?-1:1,this.selectHighlighted(),u(e),t;case D.ENTER:return this.exit=e.shiftKey?-2:2,this.selectHighlighted(),u(e),t;case D.ESC:return this.cancel(e),u(e),t}else{if(e.which===D.TAB||D.isControl(e)||D.isFunctionKey(e)||e.which===D.ESC)return;if(this.opts.openOnEnter===!1&&e.which===D.ENTER)return;if(this.open(),e.which===D.ENTER)return}}})),this.search.bind("focus",this.bind(function(){this.selection.attr("tabIndex","-1")})),this.search.bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active"),window.setTimeout(this.bind(function(){this.selection.attr("tabIndex",this.opts.element.attr("tabIndex"))}),10)})),e.bind("mousedown",this.bind(function(){s=!0,this.opened()?(this.close(),this.selection.focus()):this.enabled&&this.open(),s=!1})),n.bind("mousedown",this.bind(function(){this.search.focus()})),e.bind("focus",this.bind(function(){this.container.addClass("select2-container-active"),this.search.attr("tabIndex","-1")})),e.bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active"),window.setTimeout(this.bind(function(){this.search.attr("tabIndex",this.opts.element.attr("tabIndex"))}),10)})),e.bind("keydown",this.bind(function(e){if(this.enabled){if(e.which===D.PAGE_UP||e.which===D.PAGE_DOWN)return u(e),t;if(!(e.which===D.TAB||D.isControl(e)||D.isFunctionKey(e)||e.which===D.ESC||this.opts.openOnEnter===!1&&e.which===D.ENTER)){if(e.which==D.DELETE||e.which==D.BACKSPACE)return this.opts.allowClear&&this.clear(),u(e),t;if(this.open(),e.which===D.ENTER)return u(e),t;if(48>e.which)return u(e),t;var i=String.fromCharCode(e.which).toLowerCase();e.shiftKey&&(i=i.toUpperCase()),this.search.focus(),this.search.val(i),u(e)}}})),e.delegate("abbr","mousedown",this.bind(function(e){this.enabled&&(this.clear(),u(e),this.opts.closeOnRemove&&this.close(),this.triggerChange(["singleRemove"]),this.selection.focus())})),this.setPlaceholder(),this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")}))},clear:function(){this.opts.element.val(""),this.selection.find("span").empty(),this.selection.removeData("select2-data"),this.setPlaceholder()},initSelection:function(){if(""===this.opts.element.val())this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&null!==i&&(e.updateSelection(i),e.close(),e.setPlaceholder())},this.opts.listId)}},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments);return"select"===t.element.get(0).tagName.toLowerCase()&&(t.initSelection=function(t,i){var n=t.find(":selected");e.isFunction(i)&&i({id:n.attr("value"),text:n.text()})}),t},setPlaceholder:function(){var e=this.getPlaceholder();if(""===this.opts.element.val()&&e!==t){if(this.select&&""!==this.select.find("option:first").text())return;this.selection.find("span").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.selection.find("abbr").hide()}},postprocessResults:function(i,s,a){var r=0,o=this,l=!0;this.results.find(".select2-result-selectable").each2(function(e,i){return n(o.id(i.data("select2-data")),o.opts.element.val())?(r=e,!1):t}),this.highlight(r,a),s===!0&&(l=this.showSearchInput=w(i.results)>=this.opts.minimumResultsForSearch,this.dropdown.find(".select2-search")[l?"removeClass":"addClass"]("select2-search-hidden"),e(this.dropdown,this.container)[l?"addClass":"removeClass"]("select2-with-searchbox"))},onSelect:function(e){this.opts.element.val(),this.opts.element.val(this.id(e)),this.updateSelection(e),this.close(),this.selection.focus(),this.triggerChange()},updateSelection:function(e){var i,n=this.selection.find("span");this.selection.data("select2-data",e),n.empty(),i=this.opts.formatSelection(e,n),i!==t&&n.append(this.opts.escapeMarkup(i)),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.selection.find("abbr").show()},val:function(){var e,i=null,n=this;if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],this.select)this.select.val(e).find(":selected").each2(function(e,t){return i={id:t.attr("value"),text:t.text()},!1}),this.updateSelection(i),this.setPlaceholder();else{if(this.opts.initSelection===t)throw Error("cannot call val() if initSelection() is not defined");if(!e)return this.clear(),t;this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){n.opts.element.val(e?n.id(e):""),n.updateSelection(e),n.setPlaceholder()})}},clearSearch:function(){this.search.val("")},data:function(e){var i;return 0===arguments.length?(i=this.selection.data("select2-data"),i==t&&(i=null),i):(e&&""!==e?(this.opts.element.val(e?this.id(e):""),this.updateSelection(e)):this.clear(),t)}}),C=k(M,{createContainer:function(){var t=e("<div></div>",{"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi' style='display:none;'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments);return"select"===t.element.get(0).tagName.toLowerCase()&&(t.initSelection=function(t,i){var n=[];t.find(":selected").each2(function(e,t){n.push({id:t.attr("value"),text:t.text()})}),e.isFunction(i)&&i(n)}),t},initContainer:function(){var i,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=i=this.container.find(n),this.search.bind("keydown",this.bind(function(e){if(this.enabled){if(e.which===D.BACKSPACE&&""===this.search.val()){this.close();var n,s=i.find(".select2-search-choice-focus");if(s.length>0)return this.unselect(s.first()),this.search.width(10),u(e),t;n=i.find(".select2-search-choice"),n.length>0&&n.last().addClass("select2-search-choice-focus")}else i.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");if(this.opened())switch(e.which){case D.UP:case D.DOWN:return this.moveHighlight(e.which===D.UP?-1:1),u(e),t;case D.ENTER:return this.exit=e.shiftKey?-2:2,this.selectHighlighted(),u(e),t;case D.TAB:return this.exit=e.shiftKey?-1:1,this.selectHighlighted(),u(e),t;case D.ESC:return this.cancel(e),u(e),t}e.which===D.TAB||D.isControl(e)||D.isFunctionKey(e)||e.which===D.BACKSPACE||e.which===D.ESC||(this.opts.openOnEnter!==!1||e.which!==D.ENTER)&&(this.open(),(e.which===D.PAGE_UP||e.which===D.PAGE_DOWN)&&u(e))}})),this.search.bind("keyup",this.bind(this.resizeSearch)),this.search.bind("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.clearSearch(),e.stopImmediatePropagation()})),this.container.delegate(n,"mousedown",this.bind(function(t){this.enabled&&(e(t.target).closest(".select2-search-choice").length>0||(this.clearPlaceholder(),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.delegate(n,"focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.clearSearch()},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.search.removeAttr("disabled"))},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.search.attr("disabled",!0))},initSelection:function(){if(""===this.opts.element.val()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&null!==i&&(e.updateSelection(i),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder();e!==t&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.resizeSearch()):this.search.val(" ").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")?this.search.val("").removeClass("select2-default"):" "===this.search.val()&&this.search.val("")},opening:function(){this.parent.opening.apply(this,arguments),this.clearPlaceholder(),this.resizeSearch(),this.focusSearch()},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var n=[],s=[],a=this;e(t).each(function(){0>i(a.id(this),n)&&(n.push(a.id(this)),s.push(this))}),t=s,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){a.addSelectedChoice(this)}),a.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer(e,this.data(),this.bind(this.onSelect),this.opts),null!=e&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e){this.addSelectedChoice(e),this.select&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.positionDropdown()):this.close(),this.opts.searchClear&&(this.countSelectableResults()>0?(this.clearSearch(),this.close(),this.open()):(this.clearSearch(),this.open())),this.triggerChange({added:e}),this.focusSearch()},cancel:function(){this.close(),this.focusSearch(),this.opts.element.trigger(e.Event("cancel"))},addSelectedChoice:function(t){var i,n=e("<li class='select2-search-choice'>    <div></div>    <a href='#select2Line2116' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),s=this.id(t),a=this.getVal();i=this.opts.formatSelection(t,n),n.find("div").replaceWith("<div>"+this.opts.escapeMarkup(i)+"</div>"),n.find(".select2-search-choice-close").bind("mousedown",u).bind("click dblclick",this.bind(function(t){this.enabled&&(e(t.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.opts.closeOnRemove?this.close():(this.close(),this.open()),this.focusSearch()})).dequeue(),u(t))})).bind("focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),n.data("select2-data",t),n.insertBefore(this.searchContainer),a.push(s),this.setVal(a)},unselect:function(e){var t,n,s=this.getVal();if(e=e.closest(".select2-search-choice"),0===e.length)throw"Invalid argument: "+e+". Must be .select2-search-choice";t=e.data("select2-data"),n=i(this.id(t),s),n>=0&&(s.splice(n,1),this.setVal(s),this.select&&this.postprocessResults()),e.remove(),this.triggerChange({removed:t})},postprocessResults:function(e,n,s){var a=this.getVal(),r=this.results.find(".select2-result-selectable"),o=this.results.find(".select2-result-with-children"),l=this;r.each2(function(e,t){var n=l.id(t.data("select2-data"));i(n,a)>=0?t.addClass("select2-disabled").removeClass("select2-result-selectable"):t.removeClass("select2-disabled").addClass("select2-result-selectable")}),o.each2(function(e,t){0==t.find(".select2-result-selectable").length?t.addClass("select2-disabled"):t.removeClass("select2-disabled")}),r.each2(function(e,i){return!i.hasClass("select2-disabled")&&i.hasClass("select2-result-selectable")?(l.highlight(0,s),!1):t})},resizeSearch:function(){var e,t,i,n,s,r=a(this.search);e=d(this.search)+10,t=this.search.offset().left,i=this.selection.width(),n=this.selection.offset().left,s=i-(t-n)-r,e>s&&(s=i-r),40>s&&(s=i-r),this.search.width(s)},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),s(e,this.opts.separator))},setVal:function(t){var n;this.select?this.select.val(t):(n=[],e(t).each(function(){0>i(this,n)&&n.push(this)}),this.opts.element.val(0===n.length?"":n.join(this.opts.separator)))},val:function(){var i,n=[],s=this;if(0===arguments.length)return this.getVal();if(i=arguments[0],!i)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),t;if(this.setVal(i),this.select)this.select.find(":selected").each(function(){n.push({id:e(this).attr("value"),text:e(this).text()})}),this.updateSelection(n);else{if(this.opts.initSelection===t)throw Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var i=e(t).map(s.id);s.setVal(i),s.updateSelection(t),s.clearSearch()})}this.clearSearch()},onSortStart:function(){if(this.select)throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],i=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(i.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(i){var n,s=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(i||(i=[]),n=e.map(i,function(e){return s.opts.id(e)}),this.setVal(n),this.updateSelection(i),this.clearSearch(),t)}}),e.fn.select2=function(){var n,s,a,r,o=Array.prototype.slice.call(arguments,0),l=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","disable","positionDropdown","data"];return this.each(function(){if(0===o.length||"object"==typeof o[0])n=0===o.length?{}:e.extend({},o[0]),n.element=e(this),"select"===n.element.get(0).tagName.toLowerCase()?r=n.element.attr("multiple"):(r=n.multiple||!1,"tags"in n&&(n.multiple=r=!0)),s=r?new C:new S,s.init(n);else{if("string"!=typeof o[0])throw"Invalid arguments to select2 plugin: "+o;if(0>i(o[0],l))throw"Unknown method: "+o[0];if(a=t,s=e(this).data("select2"),s===t)return;if(a="container"===o[0]?s.container:s[o[0]].apply(s,o.slice(1)),a!==t)return!1}}),a===t?this:a},e.fn.select2.defaults={width:"copy",closeOnSelect:!0,closeOnRemove:!0,searchClear:!1,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,i){var n=[];return f(e.text,i.term,n),n.join("")},formatSelection:function(e){return e?e.text:t},formatResultCssClass:function(){return t},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){return"Please enter "+(t-e.length)+" more characters"},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(e,t){return t.toUpperCase().indexOf(e.toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:b,escapeMarkup:function(e){return e&&"string"==typeof e?e.replace(/&/g,"&amp;"):e},blurOnChange:!1},window.Select2={query:{ajax:p,local:m,tags:g},util:{debounce:l,markMatch:f},"class":{"abstract":M,single:S,multi:C}}}}(jQuery),angular.module("ADE").filter("rich",["$filter",function(){return function(e,t){if(!e)return"";var i,n=t||100;angular.isArray(e)&&(e=e[0]),e.split||(e=""+e);var s=$(e).text();s&&(e=s);var a=e.split(/\r?\n|\r/);return e=a[0],i=e.length>n?e.substring(0,n)+"...":a.length>1?e+"...":e}}]),angular.module("ADE").directive("adeRich",["ADE","$compile",function(e,t){return{require:"?ngModel",restrict:"A",link:function(i,n,s,a){var r=Math.floor(1e5*Math.random()),o={},l=!1,h=null,c="",u="",d=0,f=null;null!==a&&void 0!==a&&(a.$render=function(){return u=c=a.$modelValue,(void 0===c||null===c)&&(c=""),a.$viewValue});var p=function(t){if(u=c,d=t,3!=t){var s=$("#tinyText"+r+"_ifr").contents().find("#tinymce")[0];c=s.innerHTML,'<p><br data-mce-bogus="1"></p>'===c&&(c=""),a.$setViewValue(c)}h.remove(),l=!1,e.done(o,u,c,d),1==d?(n.data("dontclick",!0),n.focus()):-1==d&&(n.data("dontclick",!0),n.focus()),$(document).off("click.ADE"),$(document).off("keydown.ADE"),i.$digest()},m=function(){i.ADE_hidePopup();var s=n.offset(),a=s.left,r=s.top+n[0].offsetHeight-2,o=c.replace?c.replace(/\n/g,"<br />"):c;o&&(t('<div class="'+e.popupClass+' ade-rich dropdown-menu open" style="left:'+a+"px;top:"+r+'px"><div class="ade-richview">'+o+"</div></div>")(i).insertAfter(n),l=!1,h=n.next(".ade-rich"),h.bind("mouseenter.ADE",b),h.bind("mouseleave.ADE",k),h.bind("click.ADE",D))},g=function(){var e=$("#richText"),t=e.offset(),i=$(window).height(),s=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,a=e[0].offsetTop+e[0].offsetHeight;a-s>i&&e.css({top:t.top-e[0].offsetHeight-n.height()-13,left:t.left}).addClass("flip")},v=function(e){var t=0===$(".ade-popup").has(e.target).length,i="block"===$(".mce-floatpanel").css("display");if(!i&&t){for(var n=e.target,s=!1;n;){if(0===n.id.search("mce_")){s=!0;break}n=n.parentElement}s||(k(),p(0),$(document).off("mousedown.ADE"))}},y=function(e){switch(console.log("key"),e.keyCode){case 27:k(),p(3),e.preventDefault(),$(document).off("mousedown.ADE");break;case 9:k(),p(0),e.preventDefault(),$(document).off("mousedown.ADE");break;default:}},w=function(){window.clearTimeout(f),h&&h.unbind(".ADE"),i.ADE_hidePopup();var s='<textarea id="tinyText'+r+'" class="'+o.className+'" style="height:30px">'+c+"</textarea>",a=n.offset(),u=a.left,d=a.top+n[0].offsetHeight,p='<div id="richText" class="'+e.popupClass+' ade-rich dropdown-menu open" style="left:'+u+"px;top:"+d+'px">'+s+"</div>";t(p)(i).insertAfter(n),tinymce.init({selector:"#tinyText"+r,theme:"modern",menubar:"false",plugins:["textcolor","link"],toolbar:"styleselect | bold italic | bullist numlist outdent indent | hr | link | forecolor backcolor",handleKeyEvents:y}),tinymce.execCommand("mceFocus",!1,"tinyText"+r),l=!0,h=n.next(".ade-rich"),$(document).bind("mousedown.ADE",v)},b=function(){if(window.clearTimeout(f),!angular.element(".ade-rich").hasClass("open")||!angular.element(".ade-rich").find("textarea").length){var e=n.next(".ade-rich");e.length||m()}},k=function(){var t=n.next("."+e.popupClass);t.length&&!l&&(f=window.setTimeout(function(){i.ADE_hidePopup(n)},400))},D=function(){window.clearTimeout(f),l||(l=!0,d=0,e.begin(o),w(),g())},M=function(e){13===e.keyCode&&D()};return n.bind("mouseenter.ADE",b),n.bind("mouseleave.ADE",k),n.bind("click.ADE",D),n.bind("keydown.ADE",M),s.$observe("adeRich",function(t){return o=e.parseSettings(t,{className:"input-xlarge"}),n})}}}]),angular.module("ADE").filter("money",["$filter",function(e){return function(t){var i,n="";return angular.isUndefined(t)?n:(angular.isArray(t)&&(t=t[0]),angular.isString(t)&&(t=parseFloat(t.replace(/[$]/g,""))),angular.isNumber(t)&&(i=parseFloat(t),n=0!==i?e("currency")(i):n),n)}}]),angular.module("ADE").filter("percent",function(){return function(e){angular.isArray(e)&&(e=e[0]);var t=parseFloat(e),i="";return isNaN(t)||(i=t+"%"),i}}),angular.module("ADE").filter("phone",function(){return function(e){if(!e)return"";angular.isArray(e)&&(e=e[0]),angular.isString(e)||(e=""+e);var t,i=e.replace(/[\-\.() ]/g,"");return t=!isNaN(parseInt(i))&&i.length>=7?'<a href="tel:'+i+'">'+e+"</a>":e}}),angular.module("ADE").directive("adeRating",["ADE","$compile","$filter",function(e){return{require:"?ngModel",restrict:"A",link:function(t,i,n,s){var a={},r="",o="",l="";null!==s&&void 0!==s&&(s.$render=function(){return o=r=s.$modelValue,s.$viewValue});var h=function(i){e.begin(a),i>a.num&&(i=a.num),0>i&&(i=0),o=r,r=i,l=r,e.done(a,o,r,0),s.$setViewValue(r),t.$digest()};i.bind("click",function(e){var t=angular.element(e.target).data("position");void 0!==t&&h(t)});var c=function(){i.bind("keydown.ADE",function(e){e.keyCode>=48&&57>=e.keyCode?(e.preventDefault(),e.stopPropagation(),h(e.keyCode-48)):37==e.keyCode&&a.arrows?(e.preventDefault(),e.stopPropagation(),h(r-1)):39==e.keyCode&&a.arrows&&(e.preventDefault(),e.stopPropagation(),angular.isNumber(r)||(r=0),h(r+1))})};return i.bind("focus",c),i.bind("blur",function(){i.unbind("keydown.ADE")}),n.$observe("adeRating",function(t){return a=e.parseSettings(t,{num:5,arrows:!0}),i})}}}]),angular.module("ADE").filter("rating",function(){return function(e,t){var i=23,n=5,s="rating",a="off",r=10;angular.isArray(e)&&(e=e[0]),t&&t.width&&(i=t.width),t&&t.num&&(n=t.num),t&&t.className&&(s=t.className);var o=i*n+r,l='<div class="ade-'+s+'" style="width:'+o+'px;">';l+='<div class="ade-rate-container">';for(var h=0;n>=h;h++)a=e>=h?"on":"off",l+=0===h?'<a class="ade-rate-one ade-zero" data-position="'+h+'">&nbsp;</a>':'<a class="ade-rate-one ade-'+a+'" data-position="'+h+'"></a>';return l+="</div></div>"}}),angular.module("ADE").directive("adeText",["ADE","$compile",function(e,t){return{require:"?ngModel",restrict:"A",link:function(i,n,s,a){var r={},o=!1,l=null,h="",c="",u=0;null!==a&&void 0!==a&&(a.$render=function(){return c=h=a.$modelValue,(void 0===h||null===h)&&(h=""),a.$viewValue});var d=function(t){c=h,u=t,3!=t&&(h=l.val(),a.$setViewValue(h)),n.show(),l.remove(),o=!1,e.done(r,c,h,u),i.$digest()};return n.bind("click",function(){if(!o){o=!0,u=0,e.begin(r);var s="";void 0!==r.maxlength&&(s="maxlength='"+r.maxlength+"'"),angular.isString(h)||(h=""+h),n.hide(),t('<input type="text" class="'+r.className+'" value="'+h.replace(/"/g,"&quot;")+'" '+s+" />")(i).insertAfter(n),l=n.next("input"),l.focus(),e.setupBlur(l,d),e.setupKeys(l,d)}}),s.$observe("adeText",function(t){return r=e.parseSettings(t,{className:"input-medium"}),n})}}}]),!function(e){var t=function(t,i){this.$element=e(t),this.isInput=this.$element.is("input"),this.options=e.extend({},e.fn.timepicker.defaults,i,this.$element.data()),this.minuteStep=this.options.minuteStep||this.minuteStep,this.secondStep=this.options.secondStep||this.secondStep,this.showMeridian=this.options.showMeridian||this.showMeridian,this.showSeconds=this.options.showSeconds||this.showSeconds,this.showInputs=this.options.showInputs||this.showInputs,this.disableFocus=this.options.disableFocus||this.disableFocus,this.template=this.options.template||this.template,this.modalBackdrop=this.options.modalBackdrop||this.modalBackdrop,this.defaultTime=this.options.defaultTime||this.defaultTime,this.open=!1,this.init()};t.prototype={constructor:t,init:function(){this.$element.parent().hasClass("input-append")?(this.$element.parent(".input-append").find(".add-on").on("click",e.proxy(this.showWidget,this)),this.$element.on({focus:e.proxy(this.highlightUnit,this),click:e.proxy(this.highlightUnit,this),keypress:e.proxy(this.elementKeypress,this),blur:e.proxy(this.blurElement,this)})):this.template?this.$element.on({focus:e.proxy(this.showWidget,this),click:e.proxy(this.showWidget,this),blur:e.proxy(this.blurElement,this)}):this.$element.on({focus:e.proxy(this.highlightUnit,this),click:e.proxy(this.highlightUnit,this),keypress:e.proxy(this.elementKeypress,this),blur:e.proxy(this.blurElement,this)}),this.$widget=e(this.getTemplate()).appendTo("body"),this.$widget.on({click:e.proxy(this.widgetClick,this),mousedown:e.proxy(this.mousedown,this)}),this.showInputs&&(this.picker=this.$widget.find("input").on({click:function(){this.select()
},keypress:e.proxy(this.widgetKeypress,this),change:e.proxy(this.updateFromWidgetInputs,this)})),this.setDefaultTime(this.defaultTime)},showWidget:function(t){if(t.stopPropagation(),t.preventDefault(),!this.open){this.isInput||e(document).on("mousedown",e.proxy(this.hide,this)),this.$element.trigger("show"),this.disableFocus&&this.$element.blur();var i=e.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});this.updateFromElementVal(),e("html").trigger("click.timepicker.data-api").one("click.timepicker.data-api",e.proxy(this.hideWidget,this)),"modal"===this.template?this.$widget.modal("show").on("hidden",e.proxy(this.hideWidget,this)):(this.$widget.css({top:i.top+i.height,left:i.left}),this.open||this.$widget.addClass("open")),this.open=!0,this.$element.trigger("shown")}},hideWidget:function(e){var t=Date.parse(this.$element.val());this.time=null!==t?t.getTime()/1e3:"",this.save=e?!0:!1,this.$element.trigger({type:"hide",time:this.time,shouldSave:this.save}),"modal"===this.template?this.$widget.modal("hide"):this.$widget.removeClass("open"),this.open=!1,this.$element.trigger("hidden")},mousedown:function(e){e.stopPropagation(),e.preventDefault()},removeWidget:function(){this.$widget.remove()},widgetClick:function(t){t.stopPropagation(),t.preventDefault();var i=e(t.target).closest("a").data("action");i&&(this[i](),this.update())},widgetKeypress:function(t){var i=e(t.target).closest("input").attr("name");switch(t.keyCode){case 9:this.showMeridian?"meridian"==i&&this.hideWidget():this.showSeconds?"second"==i&&this.hideWidget():"minute"==i&&this.hideWidget();break;case 27:this.hideWidget();break;case 38:switch(i){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}this.update();break;case 40:switch(i){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}this.update();break;case 13:this.updateElement(),this.hideWidget()}},elementKeypress:function(e){switch(this.$element.get(0),e.keyCode){case 0:break;case 9:this.updateFromElementVal(),this.showMeridian?"meridian"!=this.highlightedUnit&&(e.preventDefault(),this.highlightNextUnit()):this.showSeconds?"second"!=this.highlightedUnit&&(e.preventDefault(),this.highlightNextUnit()):"minute"!=this.highlightedUnit&&(e.preventDefault(),this.highlightNextUnit());break;case 27:this.updateFromElementVal();break;case 37:this.updateFromElementVal(),this.highlightPrevUnit();break;case 38:switch(this.highlightedUnit){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}this.updateElement();break;case 39:this.updateFromElementVal(),this.highlightNextUnit();break;case 40:switch(this.highlightedUnit){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}this.updateElement()}0!==e.keyCode&&8!==e.keyCode&&9!==e.keyCode&&46!==e.keyCode&&e.preventDefault()},setValues:function(e){if(this.showMeridian){var t=e.split(" "),i=t[0].split(":");this.meridian=t[1]}else var i=e.split(":");this.hour=parseInt(i[0],10),this.minute=parseInt(i[1],10),this.second=parseInt(i[2],10),isNaN(this.hour)&&(this.hour=0),isNaN(this.minute)&&(this.minute=0),this.showMeridian?(this.hour>12?this.hour=12:1>this.hour&&(this.hour=1),"AM"==this.meridian||"A"==this.meridian?this.meridian="am":("PM"==this.meridian||"P"==this.meridian)&&(this.meridian="pm"),"am"!=this.meridian&&"pm"!=this.meridian&&(this.meridian="am")):this.hour>=24?this.hour=23:0>this.hour&&(this.hour=0),0>this.minute?this.minute=0:this.minute>=60&&(this.minute=59),this.showSeconds&&(isNaN(this.second)?this.second=0:0>this.second?this.second=0:this.second>=60&&(this.second=59)),""!=this.$element.val()&&this.updateElement(),this.updateWidget()},setMeridian:function(e){"a"==e||"am"==e||"AM"==e?this.meridian="AM":"p"==e||"pm"==e||"PM"==e?this.meridian="PM":this.updateWidget(),this.updateElement()},setDefaultTime:function(e){if(e){if("current"===e){var t=new Date,i=t.getHours(),n=Math.floor(t.getMinutes()/this.minuteStep)*this.minuteStep,s=Math.floor(t.getSeconds()/this.secondStep)*this.secondStep,a="am";this.showMeridian&&(0===i?i=12:i>=12?(i>12&&(i-=12),a="pm"):a="am"),this.hour=i,this.minute=n,this.second=s,this.meridian=a}else"value"===e?this.setValues(this.$element.val()):this.setValues(e);""!=this.$element.val()&&this.updateElement(),this.updateWidget()}else this.hour=0,this.minute=0,this.second=0},formatTime:function(e,t,i,n){return e=e,t=10>t?"0"+t:t,i=10>i?"0"+i:i,e+":"+t+(this.showSeconds?":"+i:"")+(this.showMeridian?" "+n:"")},getTime:function(){return this.formatTime(this.hour,this.minute,this.second,this.meridian)},setTime:function(e){this.setValues(e),this.update()},update:function(){this.updateElement(),this.updateWidget()},blurElement:function(){this.highlightedUnit=void 0,this.updateFromElementVal()},updateElement:function(){var e=this.getTime();switch(this.$element.val(e).change(),this.highlightedUnit){case"hour":this.highlightHour();break;case"minute":this.highlightMinute();break;case"second":this.highlightSecond();break;case"meridian":this.highlightMeridian()}},updateWidget:function(){this.showInputs?(this.$widget.find("input.bootstrap-timepicker-hour").val(this.hour),this.$widget.find("input.bootstrap-timepicker-minute").val(10>this.minute?"0"+this.minute:this.minute),this.showSeconds&&this.$widget.find("input.bootstrap-timepicker-second").val(10>this.second?"0"+this.second:this.second),this.showMeridian&&this.$widget.find("input.bootstrap-timepicker-meridian").val(this.meridian)):(this.$widget.find("span.bootstrap-timepicker-hour").text(this.hour),this.$widget.find("span.bootstrap-timepicker-minute").text(10>this.minute?"0"+this.minute:this.minute),this.showSeconds&&this.$widget.find("span.bootstrap-timepicker-second").text(10>this.second?"0"+this.second:this.second),this.showMeridian&&this.$widget.find("span.bootstrap-timepicker-meridian").text(this.meridian))},updateFromElementVal:function(){var e=this.$element.val();e&&(this.setValues(e),this.updateWidget())},updateFromWidgetInputs:function(){var t=e("input.bootstrap-timepicker-hour",this.$widget).val()+":"+e("input.bootstrap-timepicker-minute",this.$widget).val()+(this.showSeconds?":"+e("input.bootstrap-timepicker-second",this.$widget).val():"")+(this.showMeridian?" "+e("input.bootstrap-timepicker-meridian",this.$widget).val():"");this.setValues(t)},getCursorPosition:function(){var e=this.$element.get(0);if("selectionStart"in e)return e.selectionStart;if(document.selection){e.focus();var t=document.selection.createRange(),i=document.selection.createRange().text.length;return t.moveStart("character",-e.value.length),t.text.length-i}},highlightUnit:function(){this.$element.get(0),this.position=this.getCursorPosition(),this.position>=0&&2>=this.position?this.highlightHour():this.position>=3&&5>=this.position?this.highlightMinute():this.position>=6&&8>=this.position?this.showSeconds?this.highlightSecond():this.highlightMeridian():this.position>=9&&11>=this.position&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":this.showSeconds?this.highlightSecond():this.highlightMeridian();break;case"second":this.highlightMeridian();break;case"meridian":this.highlightHour()}},highlightPrevUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMeridian();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":this.showSeconds?this.highlightSecond():this.highlightMinute()}},highlightHour:function(){this.highlightedUnit="hour",this.$element.get(0).setSelectionRange(0,2)},highlightMinute:function(){this.highlightedUnit="minute",this.$element.get(0).setSelectionRange(3,5)},highlightSecond:function(){this.highlightedUnit="second",this.$element.get(0).setSelectionRange(6,8)},highlightMeridian:function(){this.highlightedUnit="meridian",this.showSeconds?this.$element.get(0).setSelectionRange(9,11):this.$element.get(0).setSelectionRange(6,8)},incrementHour:function(){if(this.showMeridian)if(11===this.hour)this.toggleMeridian();else if(12===this.hour)return this.hour=1;return 23===this.hour?this.hour=0:(this.hour=this.hour+1,void 0)},decrementHour:function(){if(this.showMeridian){if(1===this.hour)return this.hour=12;12===this.hour&&this.toggleMeridian()}return 0===this.hour?this.hour=23:(this.hour=this.hour-1,void 0)},incrementMinute:function(){var e=this.minute+this.minuteStep-this.minute%this.minuteStep;e>59?(this.incrementHour(),this.minute=e-60):this.minute=e},decrementMinute:function(){var e=this.minute-this.minuteStep;0>e?(this.decrementHour(),this.minute=e+60):this.minute=e},incrementSecond:function(){var e=this.second+this.secondStep-this.second%this.secondStep;e>59?(this.incrementMinute(),this.second=e-60):this.second=e},decrementSecond:function(){var e=this.second-this.secondStep;0>e?(this.decrementMinute(),this.second=e+60):this.second=e},toggleMeridian:function(){this.meridian="am"===this.meridian?"pm":"am",this.update()},getTemplate:function(){if(this.options.templates[this.options.template])return this.options.templates[this.options.template];if(this.showInputs)var e='<input type="text" name="hour" class="bootstrap-timepicker-hour" maxlength="2"/>',t='<input type="text" name="minute" class="bootstrap-timepicker-minute" maxlength="2"/>',i='<input type="text" name="second" class="bootstrap-timepicker-second" maxlength="2"/>',n='<input type="text" name="meridian" class="bootstrap-timepicker-meridian" maxlength="2"/>';else var e='<span class="bootstrap-timepicker-hour"></span>',t='<span class="bootstrap-timepicker-minute"></span>',i='<span class="bootstrap-timepicker-second"></span>',n='<span class="bootstrap-timepicker-meridian"></span>';var s,a='<table class="'+(this.showSeconds?"show-seconds":"")+" "+(this.showMeridian?"show-meridian":"")+'">'+"<tr>"+'<td><a href="#" data-action="incrementHour"><i class="icon-chevron-up"></i></a></td>'+'<td class="separator"> </td>'+'<td><a href="#" data-action="incrementMinute"><i class="icon-chevron-up"></i></a></td>'+(this.showSeconds?'<td class="separator"> </td><td><a href="#" data-action="incrementSecond"><i class="icon-chevron-up"></i></a></td>':"")+(this.showMeridian?'<td class="separator"> </td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><i class="icon-chevron-up"></i></a></td>':"")+"</tr>"+"<tr>"+"<td>"+e+"</td> "+'<td class="separator">:</td>'+"<td>"+t+"</td> "+(this.showSeconds?'<td class="separator">:</td><td>'+i+"</td>":"")+(this.showMeridian?'<td class="separator"> </td><td>'+n+"</td>":"")+"</tr>"+"<tr>"+'<td><a href="#" data-action="decrementHour"><i class="icon-chevron-down"></i></a></td>'+'<td class="separator"></td>'+'<td><a href="#" data-action="decrementMinute"><i class="icon-chevron-down"></i></a></td>'+(this.showSeconds?'<td class="separator"> </td><td><a href="#" data-action="decrementSecond"><i class="icon-chevron-down"></i></a></td>':"")+(this.showMeridian?'<td class="separator"> </td><td><a href="#" data-action="toggleMeridian"><i class="icon-chevron-down"></i></a></td>':"")+"</tr>"+"</table>";switch(this.options.template){case"modal":s='<div class="bootstrap-timepicker modal hide fade in" style="top: 30%; margin-top: 0; width: 200px; margin-left: -100px;" data-backdrop="'+(this.modalBackdrop?"true":"false")+'">'+'<div class="modal-header">'+'<a href="#" class="close" data-dismiss="modal">×</a>'+"<h3>Pick a Time</h3>"+"</div>"+'<div class="modal-content">'+a+"</div>"+'<div class="modal-footer">'+'<a href="#" class="btn btn-primary" data-dismiss="modal">Ok</a>'+"</div>"+"</div>";break;case"dropdown":s='<div class="bootstrap-timepicker dropdown-menu">'+a+"</div>"}return s}},e.fn.timepicker=function(i,n){return this.each(function(){var s=e(this),a=s.data("timepicker"),r="object"==typeof i&&i;a||s.data("timepicker",a=new t(this,r)),"string"==typeof i&&a[i](n)})},e.fn.timepicker.defaults={minuteStep:15,secondStep:15,disableFocus:!1,defaultTime:"current",showSeconds:!1,showInputs:!0,showMeridian:!0,template:"dropdown",modalBackdrop:!1,templates:{}},e.fn.timepicker.Constructor=t}(window.jQuery),angular.module("ADE").directive("adeTimepop",["$filter",function(e){return{require:"?ngModel",restrict:"A",link:function(t,i,n,s){var a=!1;i.bind("keydown",function(e){if(13==e.keyCode)i.timepicker("updateWidget"),i.timepicker("hideWidget"),i.blur();else if(27==e.keyCode)i.timepicker("hideWidget",!1);else if(a){var t=s.$viewValue,n=i.timepicker().data().timepicker,r=t.split(" "),o=r[0].split(":"),l=parseInt(o[0],10),h=parseInt(o[1],10),c=r[1],u=23>=l?l:23,d=59>=h?h:59;n.hour=u,n.minute=d,n.meridian=c,i.timepicker("updateWidget")}}),i.bind("keydown",function(e){9==e.keyCode&&(i.timepicker("updateWidget"),i.timepicker("hideWidget",!0))}),i.bind("keypress",function(e){var t=[49,50,51,52,53,54,55,56,57,109,112,97,48,58,8,186,13,27,32];a=!1;for(var n=0;t.length>n;n++)if(!a){if(e.keyCode===t[n])return a=!0,8>i.length?a:!1;a=!1}return!1});var r=function(n){var a="",r=r||"12";return n.shouldSave?(n.time&&(a=e("time")(n.time,r)),i.context.value=a,void 0!==s&&null!==s&&s.$setViewValue(n.time),t.$$phase||t.$digest(),void 0):(i.context.value=e("time")(s.$viewValue,r),void 0)};return void 0!==s&&null!==s&&(s.$render=function(){if(s.$viewValue){var t=i.timepicker().data().timepicker.options.showMeridian,n=t?e("time")(s.$viewValue):e("time")(s.$viewValue,"24");i.timepicker("setValues",n),i.timepicker("update")}else null===s.$viewValue&&(i.timepicker("setValues",null),i.timepicker("update"));return s.$viewValue}),n.$observe("adeTimepop",function(e){var t={};return angular.isObject(e)&&(t=e),"string"==typeof e&&e.length>0&&(t=angular.fromJson(e)),t.format&&(format=t.format),i.timepicker(t).on("hide.timepicker",r)})}}}]),angular.module("ADE").directive("adeTime",["ADE","$compile","$filter",function(e,t){return{require:"?ngModel",restrict:"A",link:function(i,n,s,a){var r={},o=!1,l=null,h=null,c=null,u=0;null!==a&&void 0!==a&&(a.$render=function(){return c=h=a.$modelValue,(void 0===h||null===h)&&(h=""),a.$viewValue});var d=function(t){var s=l.val(),c=h;if(u=t,3!=t){var d=s.split(" "),f=d[0].split(":"),p=parseInt(f[0],10),m=parseInt(f[1],10),g=d[1]||"",v=23>=p?p:23,y=59>=m?m:59,w=v+":"+y+" "+g;h=f.length>1?Date.parse(w).getTime()/1e3:"",a.$setViewValue(h)}n.show(),l.timepicker("removeWidget"),l.scope().$destroy(),l.remove(),o=!1,e.done(r,c,h,u),i.$digest()};return n.bind("click",function(){var s,a;if(!o){o=!0,u=0,h=h||0,e.begin(r),n.hide(),"24"===r.format?(s='"showMeridian":false',a=5):(s='"showMeridian":true',a=5);var c='<input ng-controller="adeTimeDummyCtrl" ade-timepop=\'{'+s+'}\' ng-model="adePickTime1" ng-init="adePickTime1='+h+'" maxlength="'+a+'" type="text" class="'+r.className+'" />';t(c)(i).insertAfter(n),l=n.next("input"),l.focus(),setTimeout(function(){l.focus()}),e.setupBlur(l,d),e.setupKeys(l,d),i.$parent&&i.$parent.$localApply?i.$parent.$localApply():i.$apply()}}),s.$observe("adeTime",function(t){return r=e.parseSettings(t,{className:"input-medium"}),n})}}}]),angular.module("ADE").filter("time",function(){return function(e,t){var i,n,s,a,r="",t=t||"12";return angular.isUndefined(e)?r:(angular.isArray(e)&&(e=e[0]),0==e?r:(angular.isNumber(e)&&(i=new Date(1e3*e)),angular.isDate(i)?(s=i.getHours(),a=i.getMinutes(),"12"===t?(n=s>=12?"pm":"am",s%=12,s=s?s:12,a=10>a?"0"+a:a,r=s+":"+a+" "+n):(a=10>a?"0"+a:a,r=s+":"+a),r):r))}}),angular.module("ADE").directive("adeToggle",["ADE","$compile","$filter",function(e){return{require:"?ngModel",restrict:"A",link:function(t,i,n,s){var a={},r="",o="",l="";return null!==s&&void 0!==s&&(s.$render=function(){return o=r=s.$modelValue,(void 0===r||null===r)&&(r=""),s.$viewValue}),i.bind("click",function(i){i.preventDefault(),i.stopPropagation(),e.begin(a),o=r,r=r?!1:!0,l=r,s.$setViewValue(r),e.done(a,o,r,0),t.$digest()}),i.bind("focus",function(){i.bind("keypress.ADE",function(e){13==e.keyCode&&(e.preventDefault(),e.stopPropagation(),i.click())})}),i.bind("blur",function(){i.unbind("keypress.ADE")}),n.$observe("adeToggle",function(t){return a=e.parseSettings(t,{}),i})}}}]),angular.module("ADE").filter("toggle",function(){return function(e,t){return angular.isArray(e)&&(e=e[0]),angular.isString(e)&&(e=e.toLowerCase(),("false"==e||"no"==e||"0"==e||"o"==e)&&(e=!1)),e?'<span class="ade-'+t+' ade-on">':'<span class="ade-'+t+' ade-off">'}}),angular.module("ADE").filter("url",["$filter",function(e){return function(t){var i=/^(https?:\/\/)([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/,n="",s="";return t?(angular.isArray(t)&&(t=t[0]),angular.isString(t)||(t=""+t),i.test(t)?s=e("linky")(t):t.indexOf(".")>=0?(n="http://"+t,s='<a href="'+n+'">'+n+"</a>"):s=t,s):""}}]);